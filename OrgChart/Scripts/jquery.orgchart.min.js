"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,i,n){var s=function(t,i){this.$chartContainer=e(t),this.opts=i,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var i=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var n=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});return"undefined"!=typeof MutationObserver&&this.triggerInitEvent(),"object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):(a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),e.ajax({url:s,dataType:"json"}).done(function(e,t,n){i.buildHierarchy(a,i.options.ajaxURL?e:i.attachRel(e,"00"),0,i.options)}).fail(function(e,t,i){console.log(i)}).always(function(){a.children(".spinner").remove()})),n.append(a),this.options.exportButton&&!n.find(".oc-export-btn").length&&this.attachExportButton(),this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},triggerInitEvent:function(){var t=this,i=new MutationObserver(function(n){i.disconnect();e:for(var s=0;s<n.length;s++)for(var a=0;a<n[s].addedNodes.length;a++)if(n[s].addedNodes[a].classList.contains("orgchart")&&t.options.initCompleted&&"function"==typeof t.options.initCompleted){t.options.initCompleted(t.$chart);var o=e.Event("init.orgchart");t.$chart.trigger(o);break e}});i.observe(this.$chartContainer[0],{childList:!0})},attachExportButton:function(){var t=this,i=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),t.export()}});this.$chartContainer.append(i)},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var i=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)i.data("panning",!1);else{i.css("cursor","move").data("panning",!0);var n=0,s=0,a=i.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(n=parseInt(o[4]),s=parseInt(o[5])):(n=parseInt(o[12]),s=parseInt(o[13]))}var d=0,r=0;if(t.targetTouches){if(1===t.targetTouches.length)d=t.targetTouches[0].pageX-n,r=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else d=t.pageX-n,r=t.pageY-s;i.on("mousemove touchmove",function(e){if(i.data("panning")){var t=0,n=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-d,n=e.targetTouches[0].pageY-r;else if(e.targetTouches.length>1)return}else t=e.pageX-d,n=e.pageY-r;var s=i.css("transform");if("none"===s)-1===s.indexOf("3d")?i.css("transform","matrix(1, 0, 0, 1, "+t+", "+n+")"):i.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+n+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+n+")"):(a[12]=" "+t,a[13]=" "+n),i.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(i).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(i).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var i=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,i)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var i=t.getPinchDist(e);t.$chart.data("pinchDistStart",i)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var i=t.getPinchDist(e);t.$chart.data("pinchDistEnd",i)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var i=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");i>0?t.setChartScale(t.$chart,1.2):i<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(i).on("touchmove",{oc:this},this.zoomingHandler),e(i).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(i).off("touchmove",this.zoomingHandler),e(i).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,i){var n=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+i+","+i+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=Math.abs(t.parseFloat(a[3])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale("+i+","+i+")"):(o=Math.abs(t.parseFloat(a[1])*i))>n.zoomoutLimit&&o<n.zoominLimit&&e.css("transform",s+" scale3d("+i+","+i+", 1)"))},buildJsonDS:function(t){var i=this,n={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t.attr("data-id")&&(n.id=t.attr("data-id")),t.children("ul").children().each(function(){n.children||(n.children=[]),n.children.push(i.buildJsonDS(e(this)))}),n},attachRel:function(e,t){var i=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){i.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var i=this,n=t.find("tr:first"),s={id:n.find(".node")[0].id};return n.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(i.loopChart(e(this)))}),s},getHierarchy:function(){if(void 0===this.$chart)return"Error: orgchart does not exist";if(!this.$chart.find(".node").length)return"Error: nodes do not exist";var e=!0;return this.$chart.find(".node").each(function(){if(!this.id)return e=!1,!1}),e?this.loopChart(this.$chart):"Error: All nodes of orghcart to be exported must have data-id attribute!"},getNodeState:function(e,t){var i={};if("parent"===(t=t||"self")){if((i=e.closest(".nodes").siblings(":first")).length)return i.is(".hidden")||!i.is(".hidden")&&i.closest(".nodes").is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("children"===t){if((i=e.closest("tr").siblings(":last")).length)return i.is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if("siblings"===t){if((i=e.closest("table").parent().siblings()).length)return i.is(".hidden")||i.parent().is(".hidden")?{exist:!0,visible:!1}:{exist:!0,visible:!0}}else if((i=e).length)return i.closest(".nodes").length&&i.closest(".nodes").is(".hidden")||i.closest("table").parent().length&&i.closest("table").parent().is(".hidden")||i.parent().is("li")&&(i.closest("ul").is(".hidden")||i.closest("verticalNodes").is(".hidden"))?{exist:!0,visible:!1}:{exist:!0,visible:!0};return{exist:!1,visible:!1}},getRelatedNodes:function(t,i){return t&&t instanceof e&&t.is(".node")?"parent"===i?t.closest(".nodes").parent().children(":first").find(".node"):"children"===i?t.closest("tr").siblings(".nodes").children().find(".node:first"):"siblings"===i?t.closest("table").parent().siblings().find(".node:first"):e():e()},hideParentEnd:function(t){e(t.target).removeClass("sliding"),t.data.upperLevel.addClass("hidden").slice(1).removeAttr("style")},hideParent:function(e){var t=e.closest(".nodes").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e),t.slice(1).css("visibility","hidden");var i=t.eq(0).find(".node");this.getNodeState(i).visible&&i.addClass("sliding slide-down").one("transitionend",{upperLevel:t},this.hideParentEnd),this.getNodeState(i,"parent").visible&&this.hideParent(i)},showParentEnd:function(t){var i=t.data.node;e(t.target).removeClass("sliding"),this.isInAction(i)&&this.switchVerticalArrow(i.children(".topEdge"))},showParent:function(e){var t=e.closest(".nodes").siblings().removeClass("hidden");t.eq(2).children().slice(1,-1).addClass("hidden");var i=t.eq(0).find(".node");this.repaint(i[0]),i.addClass("sliding").removeClass("slide-down").one("transitionend",{node:e},this.showParentEnd.bind(this))},stopAjax:function(e){e.find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1)},isVisibleNode:function(t,i){return this.getNodeState(e(i)).visible},hideChildrenEnd:function(e){e.data.animatedNodes.removeClass("sliding"),e.data.isVerticalDesc?e.data.lowerLevel.addClass("hidden"):(e.data.animatedNodes.closest(".nodes").prevAll(".lines").removeAttr("style").addBack().addClass("hidden"),e.data.lowerLevel.last().find(".verticalNodes").addClass("hidden")),this.isInAction(e.data.node)&&this.switchVerticalArrow(e.data.node.children(".bottomEdge"))},hideChildren:function(e){var t=e.closest("tr").siblings();this.stopAjax(t.last());var i=t.last().find(".node").filter(this.isVisibleNode.bind(this)),n=!!t.last().is(".verticalNodes");n||i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden"),this.repaint(i.get(0)),i.addClass("sliding slide-up").eq(0).one("transitionend",{animatedNodes:i,lowerLevel:t,isVerticalDesc:n,node:e},this.hideChildrenEnd.bind(this))},showChildrenEnd:function(e){var t=e.data.node;e.data.animatedNodes.removeClass("sliding"),this.isInAction(t)&&this.switchVerticalArrow(t.children(".bottomEdge"))},showChildren:function(e){var t=e.closest("tr").siblings(),i=!!t.is(".verticalNodes")?t.removeClass("hidden").find(".node").filter(this.isVisibleNode.bind(this)):t.removeClass("hidden").eq(2).children().find(".node:first").filter(this.isVisibleNode.bind(this));this.repaint(i.get(0)),i.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{node:e,animatedNodes:i},this.showChildrenEnd.bind(this))},hideSiblingsEnd:function(e){var t=e.data.node,i=e.data.nodeContainer,n=e.data.direction;e.data.lines.removeAttr("style");var s=n?"left"===n?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,n?2*s.length+1:-1).addClass("hidden"),e.data.animatedNodes.removeClass("sliding"),s.find(".node:gt(0)").filter(this.isVisibleNode.bind(this)).removeClass("slide-left slide-right").addClass("slide-up"),s.find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),this.isInAction(t)&&this.switchHorizontalArrow(t)},hideSiblings:function(e,t){var i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"):i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"):(i.prevAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-right"),i.nextAll().find(".node").filter(this.isVisibleNode.bind(this)).addClass("sliding slide-left"));var n=i.siblings().find(".sliding"),s=n.closest(".nodes").prevAll(".lines").css("visibility","hidden");n.eq(0).one("transitionend",{node:e,nodeContainer:i,direction:t,animatedNodes:n,lines:s},this.hideSiblingsEnd.bind(this))},showSiblingsEnd:function(e){var t=e.data.node;e.data.visibleNodes.removeClass("sliding"),this.isInAction(t)&&(this.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))},showRelatedParentEnd:function(t){e(t.target).removeClass("sliding")},showSiblings:function(t,i){var n=e();n=i?"left"===i?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var s=t.closest("table").closest("tr").siblings();if(i?s.eq(2).children(".hidden").slice(0,2*n.length).removeClass("hidden"):s.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){s.removeClass("hidden");var a=s.find(".node")[0];this.repaint(a),e(a).addClass("sliding").removeClass("slide-down").one("transitionend",this.showRelatedParentEnd)}var o=n.find(".node").filter(this.isVisibleNode.bind(this));this.repaint(o.get(0)),o.addClass("sliding").removeClass("slide-left slide-right"),o.eq(0).one("transitionend",{node:t,visibleNodes:o},this.showSiblingsEnd.bind(this))},startLoading:function(t){var i=this.$chart;return(void 0===i.data("inAjax")||!0!==i.data("inAjax"))&&(t.addClass("hidden"),t.parent().append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>').children().not(".spinner").css("opacity",.2),i.data("inAjax",!0),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t){var i=t.parent();t.removeClass("hidden"),i.find(".spinner").remove(),i.children().removeAttr("style"),this.$chart.data("inAjax",!1),e(".oc-export-btn"+(""!==this.options.chartClass?"."+this.options.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var i=e.closest("table").parent().prev();i.length&&(i.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var n=e.closest("table").parent().next();n.length&&(n.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},nodeEnterLeaveHandler:function(t){var i=e(t.delegateTarget),n=!1,s=i.children(".topEdge"),a=(i.children(".rightEdge"),i.children(".bottomEdge")),o=i.children(".leftEdge");"mouseenter"===t.type?(s.length&&(n=this.getNodeState(i,"parent").visible,s.toggleClass("fa-chevron-up",!n).toggleClass("fa-chevron-down",n)),a.length&&(n=this.getNodeState(i,"children").visible,a.toggleClass("fa-chevron-down",!n).toggleClass("fa-chevron-up",n)),o.length&&this.switchHorizontalArrow(i)):i.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")},nodeClickHandler:function(t){this.$chart.find(".focused").removeClass("focused"),e(t.delegateTarget).addClass("focused")},loadNodes:function(t,i,n){var s=this,a=this.options;e.ajax({url:i,dataType:"json"}).done(function(i){s.$chart.data("inAjax")&&("parent"===t?e.isEmptyObject(i)||s.addParent(n.parent(),i,a):"children"===t?i.children.length&&s.addChildren(n.parent(),i,e.extend({},a,{depth:0})):(i.siblings||i.children)&&s.addSiblings(n.parent(),i,a))}).fail(function(){console.log("Failed to get "+t+" data")}).always(function(){s.endLoading(n)})},HideFirstParentEnd:function(e){var t=e.data.topEdge,i=t.parent();this.isInAction(i)&&(this.switchVerticalArrow(t),this.switchHorizontalArrow(i))},topEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"parent");if(s.exist){var a=n.closest("table").closest("tr").siblings(":first").find(".node");if(a.is(".sliding"))return;s.visible?(this.hideParent(n),a.one("transitionend",{topEdge:i},this.HideFirstParentEnd.bind(this))):this.showParent(n)}else if(this.startLoading(i)){var o=this.options,d=e.isFunction(o.ajaxURL.parent)?o.ajaxURL.parent(t.data.nodeData):o.ajaxURL.parent+n[0].id;this.loadNodes("parent",d,i)}},bottomEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.getNodeState(n,"children");if(s.exist){if(n.closest("tr").siblings(":last").find(".sliding").length)return;s.visible?this.hideChildren(n):this.showChildren(n)}else if(this.startLoading(i)){var a=this.options,o=e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(t.data.nodeData):a.ajaxURL.children+n[0].id;this.loadNodes("children",o,i)}},hEdgeClickHandler:function(t){t.stopPropagation();var i=e(t.target),n=e(t.delegateTarget),s=this.options,a=this.getNodeState(n,"siblings");if(a.exist){if(n.closest("table").parent().siblings().find(".sliding").length)return;if(s.toggleSiblingsResp){var o=n.closest("table").parent().prev(),d=n.closest("table").parent().next();i.is(".leftEdge")?o.is(".hidden")?this.showSiblings(n,"left"):this.hideSiblings(n,"left"):d.is(".hidden")?this.showSiblings(n,"right"):this.hideSiblings(n,"right")}else a.visible?this.hideSiblings(n):this.showSiblings(n)}else if(this.startLoading(i)){var r=n[0].id,l=this.getNodeState(n,"parent").exist?e.isFunction(s.ajaxURL.siblings)?s.ajaxURL.siblings(t.data.nodeData):s.ajaxURL.siblings+r:e.isFunction(s.ajaxURL.families)?s.ajaxURL.families(t.data.nodeData):s.ajaxURL.families+r;this.loadNodes("siblings",l,i)}},expandVNodesEnd:function(e){e.data.vNodes.removeClass("sliding")},collapseVNodesEnd:function(e){e.data.vNodes.removeClass("sliding").closest("ul").addClass("hidden")},toggleVNodes:function(t){var i=e(t.target),n=i.parent().next(),s=n.find(".node"),a=n.children().children(".node");a.is(".sliding")||(i.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(n.removeClass("hidden"),this.repaint(a.get(0)),a.addClass("sliding").removeClass("slide-up").eq(0).one("transitionend",{vNodes:a},this.expandVNodesEnd)):(s.addClass("sliding slide-up").eq(0).one("transitionend",{vNodes:s},this.collapseVNodesEnd),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))},createGhostNode:function(n){var s=e(n.target),a=this.options,o=n.originalEvent,d=/firefox/.test(t.navigator.userAgent.toLowerCase());d&&o.dataTransfer.setData("text/html","hack for firefox");var r,l;i.querySelector(".ghost-node")?(r=s.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=i.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),s.closest(".orgchart").append(r));var h=s.closest(".orgchart").css("transform").split(","),c=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?h[0].slice(h[0].indexOf("(")+1):h[1]));r.setAttribute("width",s.outerWidth(!1)),r.setAttribute("height",s.outerHeight(!1)),l.setAttribute("x",5*c),l.setAttribute("y",5*c),l.setAttribute("width",120*c),l.setAttribute("height",40*c),l.setAttribute("rx",4*c),l.setAttribute("ry",4*c),l.setAttribute("stroke-width",1*c);var g=o.offsetX*c,p=o.offsetY*c;if("l2r"===a.direction?(g=o.offsetY*c,p=o.offsetX*c):"r2l"===a.direction?(g=s.outerWidth(!1)-o.offsetY*c,p=o.offsetX*c):"b2t"===a.direction&&(g=s.outerWidth(!1)-o.offsetX*c,p=s.outerHeight(!1)-o.offsetY*c),d){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var f=i.createElement("img");f.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),o.dataTransfer.setDragImage(f,g,p)}else o.dataTransfer.setDragImage(r,g,p)},filterAllowedDropNodes:function(t){var i=this.options,n=t.closest(".nodes").siblings().eq(0).find(".node:first"),s=t.closest("table").find(".node");this.$chart.data("dragged",t).find(".node").each(function(a,o){-1===s.index(o)&&(i.dropCriteria?i.dropCriteria(t,n,e(o))&&e(o).addClass("allowedDrop"):e(o).addClass("allowedDrop"))})},dragstartHandler:function(t){"none"!==this.$chart.css("transform")&&this.createGhostNode(t),this.filterAllowedDropNodes(e(t.target))},dragoverHandler:function(t){t.preventDefault(),e(t.delegateTarget).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")},dragendHandler:function(e){this.$chart.find(".allowedDrop").removeClass("allowedDrop")},dropHandler:function(t){var i=e(t.delegateTarget),n=this.$chart.data("dragged"),s=n.closest(".nodes").siblings().eq(0).children(),a=e.Event("nodedrop.orgchart");if(this.$chart.trigger(a,{draggedNode:n,dragZone:s.children(),dropZone:i}),!a.isDefaultPrevented()){if(i.closest("tr").siblings().length){var o=parseInt(i.parent().attr("colspan"))+2,d='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';i.closest("tr").next().addBack().children().attr("colspan",o),n.find(".horizontalEdge").length||n.append(d),i.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine"></td><td class="rightLine topLine"></td>').end().next().append(n.closest("table").parent());var r=n.closest("table").parent().siblings().find(".node:first");1===r.length&&r.append(d)}else i.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine"></td><td class="leftLine"></td></tr><tr class="nodes"></tr>').siblings(":last").append(n.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(s.attr("colspan"));if(l>2){s.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var h=s.parent().siblings(".nodes").children().find(".node:first");1===h.length&&h.find(".horizontalEdge").remove()}else s.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove()}},touchstartHandler:function(e){console.log("orgChart: touchstart 1: touchHandled="+this.touchHandled+", touchMoved="+this.touchMoved+", target="+e.target.innerText),this.touchHandled||(this.touchHandled=!0,this.touchMoved=!1,e.preventDefault())},touchmoveHandler:function(t){if(this.touchHandled){if(t.preventDefault(),!this.touchMoved){e(this).hasClass("focused");console.log("orgChart: touchmove 1: "+t.touches.length+" touches, we have not moved, so simulate a drag start",t.touches),this.simulateMouseEvent(t,"dragstart")}this.touchMoved=!0;var n=e(i.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY)).closest("div.node");if(n.length>0){var s=n[0];n.is(".allowedDrop")?(console.log("orgChart: touchmove 2: this node ("+s.id+") is allowed to be a drop target"),this.touchTargetNode=s):(console.log("orgChart: touchmove 3: this node ("+s.id+") is NOT allowed to be a drop target"),this.touchTargetNode=null)}else console.log("orgchart: touchmove 4: not touching a node"),this.touchTargetNode=null}},touchendHandler:function(e){if(console.log("orgChart: touchend 1: touchHandled="+this.touchHandled+", touchMoved="+this.touchMoved+", "+e.target.innerText+" "),this.touchHandled){if(this.touchMoved){if(this.touchTargetNode){console.log("orgChart: touchend 3: moved to a node, so simulating drop");var t={delegateTarget:this.touchTargetNode};this.dropHandler(t),this.touchTargetNode=null}console.log("orgChart: touchend 4: simulating dragend"),this.simulateMouseEvent(e,"dragend")}else console.log("orgChart: touchend 5: moved, so simulating click"),this.simulateMouseEvent(e,"click");this.touchHandled=!1}else console.log("orgChart: touchend 2: not handled by us, so aborting")},simulateMouseEvent:function(e,n){if(!(e.originalEvent.touches.length>1)){var s=e.originalEvent.changedTouches[0],a=i.createEvent("MouseEvents");a.initMouseEvent(n,!0,!0,t,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(a)}},createNode:function(t,i,n){t.children&&e.each(t.children,function(e,i){i.parentId=t.id});var s=e.Deferred(),a=e("<div"+(n.draggable?' draggable="true"':"")+(t[n.nodeId]?' id="'+t[n.nodeId]+'"':"")+(t.parentId?' data-parent="'+t.parentId+'"':"")+">").addClass("node "+(t.className||"")+(i>=n.depth?" slide-up":""));n.nodeTemplate?a.append(n.nodeTemplate(t)):a.append('<div class="title">'+t[n.nodeTitle]+"</div>").append(void 0!==n.nodeContent?'<div class="content">'+(t[n.nodeContent]||"")+"</div>":"");var o=t.relationship||"";if(n.verticalDepth&&i+2>n.verticalDepth){if(i+1>=n.verticalDepth&&Number(o.substr(2,1))){var d=i+1>=n.depth?"plus":"minus";a.append('<i class="toggleBtn fa fa-'+d+'-square"></i>')}}else Number(o.substr(0,1))&&a.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(o.substr(1,1))&&a.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(o.substr(2,1))&&a.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>');return a.on("mouseenter mouseleave",this.nodeEnterLeaveHandler.bind(this)),a.on("click",this.nodeClickHandler.bind(this)),a.on("click",".topEdge",{nodeData:t},this.topEdgeClickHandler.bind(this)),a.on("click",".bottomEdge",{nodeData:t},this.bottomEdgeClickHandler.bind(this)),a.on("click",".leftEdge, .rightEdge",{nodeData:t},this.hEdgeClickHandler.bind(this)),a.on("click",".toggleBtn",this.toggleVNodes.bind(this)),n.draggable&&(a.on("dragstart",this.dragstartHandler.bind(this)).on("dragover",this.dragoverHandler.bind(this)).on("dragend",this.dragendHandler.bind(this)).on("drop",this.dropHandler.bind(this)).on("touchstart",this.touchstartHandler.bind(this)).on("touchmove",this.touchmoveHandler.bind(this)).on("touchend",this.touchendHandler.bind(this)),this.touchHandled=!1,this.touchMoved=!1,this.touchTargetNode=null),n.createNode&&n.createNode(a,t),s.resolve(a),s.promise()},buildHierarchy:function(t,i,n,s,a){var o,d=this,r=i.children,l=!!r&&r.length,h=!!(s.verticalDepth&&n+1>=s.verticalDepth);if(Object.keys(i).length>1&&(o=h?t:e("<table>"),h||t.append(o),e.when(this.createNode(i,n,s)).done(function(t){h?o.append(t):o.append(e("<tr/>").append(e("<td"+(l?' colspan="'+2*r.length+'"':"")+"></td>").append(t))),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(i).length&&(o=t);var c=n+1>=s.depth||i.collapsed?" hidden":"",g=!!(s.verticalDepth&&n+2>=s.verticalDepth);g||o.append('<tr class="lines'+c+'"><td colspan="'+2*r.length+'"><div class="downLine"></div></td></tr>');for(var p='<tr class="lines'+c+'"><td class="rightLine"></td>',f=1;f<r.length;f++)p+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';p+='<td class="leftLine"></td></tr>';var u;g?(u=e("<ul>"),c&&s.depth+1!==s.verticalDepth&&u.addClass(c),n+2===s.verticalDepth?o.append('<tr class="verticalNodes'+c+'"><td></td></tr>').find(".verticalNodes").children().append(u):o.append(u)):(u=e('<tr class="nodes'+c+'">'),o.append(p).append(u)),e.each(r,function(){var t=e(g?"<li>":'<td colspan="2">');u.append(t),d.buildHierarchy(t,this,n+1,s,a)})}},buildChildNode:function(e,t,i,n){var i=i||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,i,n)},addChildren:function(e,t,i){var n=this,i=i||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,i,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+i.parentNodeSymbol+' symbol"></i>'),n.showChildren(e))})},buildParentNode:function(t,i,n,s){var a=this,o=e("<table>");i.relationship=i.relationship||"001",e.when(this.createNode(i,0,n||t.closest(".orgchart").data("options"))).done(function(t){o.append(e('<tr class="hidden">').append(e('<td colspan="2">').append(t.removeClass("slide-up").addClass("slide-down")))),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine"></td><td class="leftLine"></td></tr>');var i=a.$chart;i.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(i.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,i){var n=this;this.buildParentNode(e,t,i,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),n.showParent(e)})},complementLine:function(e,t,i){for(var n="",s=0;s<i;s++)n+='<td class="leftLine topLine"></td><td class="rightLine topLine"></td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(n)},buildSiblingNode:function(t,i,n,s){var a=this,n=n||t.closest(".orgchart").data("options"),o=i.siblings?i.siblings.length:i.children.length,d=t.parent().is("td")?t.closest("tr").children().length:1,r=d+o,l=r>1?Math.floor(r/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var h=0;this.buildChildNode(t.parent().closest("table"),i,n,function(){if(++h===o){var e=t.parent().closest("table").children("tr:last").children("td");d>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),r,d),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),r,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var c=0;this.buildHierarchy(t.closest(".orgchart"),i,0,n,function(){++c===r&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),r,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,i){var n=this;this.buildSiblingNode(e.closest("table"),t,i,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),n.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),i=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(i.eq(2).children(".topLine:lt(2)").remove(),i.slice(0,2).children().attr("colspan",i.eq(2).children().length),t.remove()):i.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(n,s){var a=this;if(n=void 0!==n?n:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,d=o.find(".mask");d.length?d.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var r=o.addClass("canvasContainer").find('.orgchart:not(".hidden")').get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(r,{width:l?r.clientHeight:r.clientWidth,height:l?r.clientWidth:r.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find('.orgchart:not(".hidden"):first').css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var d={},r=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(d=r>l?new jsPDF("l","mm",[r,l]):new jsPDF("p","mm",[l,r])).addImage(e.toDataURL(),"png",0,0),d.save(n+".pdf")}else{var h="WebkitAppearance"in i.documentElement.style,c=!!t.sidebar,g="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!h&&!c||g)t.navigator.msSaveBlob(e.msToBlob(),n+".png");else{var p=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(p).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+n+'.png"></a>'),o.find(p).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsInRyaWdnZXJJbml0RXZlbnQiLCJ0eXBlIiwiYnVpbGRIaWVyYXJjaHkiLCJidWlsZEpzb25EUyIsImNoaWxkcmVuIiwiYWpheFVSTCIsImF0dGFjaFJlbCIsImFwcGVuZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRvbmUiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJjb25zb2xlIiwibG9nIiwiYWx3YXlzIiwiYXR0YWNoRXhwb3J0QnV0dG9uIiwiYmluZFBhbiIsImJpbmRab29tIiwibW8iLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0IiwiaW5pdFRpbWUiLCJpIiwiaiIsImFkZGVkTm9kZXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluaXRDb21wbGV0ZWQiLCJpbml0RXZlbnQiLCJFdmVudCIsInRyaWdnZXIiLCJvYnNlcnZlIiwiY2hpbGRMaXN0IiwiJGV4cG9ydEJ0biIsInRleHQiLCJlIiwicHJldmVudERlZmF1bHQiLCJleHBvcnQiLCJzZXRPcHRpb25zIiwidmFsIiwidW5iaW5kUGFuIiwidW5iaW5kWm9vbSIsInBhblN0YXJ0SGFuZGxlciIsImRlbGVnYXRlVGFyZ2V0IiwidG91Y2hlcyIsImNzcyIsImxhc3RYIiwibGFzdFkiLCJsYXN0VGYiLCJ0ZW1wIiwic3BsaXQiLCJpbmRleE9mIiwicGFyc2VJbnQiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRUb3VjaGVzIiwicGFnZVgiLCJwYWdlWSIsIm9uIiwibmV3WCIsIm5ld1kiLCJtYXRyaXgiLCJqb2luIiwicGFuRW5kSGFuZGxlciIsImNoYXJ0Iiwib2ZmIiwiem9vbVdoZWVsSGFuZGxlciIsIm9jIiwibmV3U2NhbGUiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwic2V0Q2hhcnRTY2FsZSIsInpvb21TdGFydEhhbmRsZXIiLCJkaXN0IiwiZ2V0UGluY2hEaXN0Iiwiem9vbWluZ0hhbmRsZXIiLCJ6b29tRW5kSGFuZGxlciIsImRpZmYiLCJNYXRoIiwic3FydCIsImNsaWVudFgiLCJjbGllbnRZIiwidGFyZ2V0U2NhbGUiLCJhYnMiLCJwYXJzZUZsb2F0IiwiJGxpIiwic3ViT2JqIiwibmFtZSIsImNvbnRlbnRzIiwiZXEiLCJ0cmltIiwicmVsYXRpb25zaGlwIiwicGFyZW50IiwiaXMiLCJzaWJsaW5ncyIsImF0dHIiLCJpZCIsImVhY2giLCJwdXNoIiwiZmxhZ3MiLCJmb3JFYWNoIiwiaXRlbSIsImxvb3BDaGFydCIsIiR0ciIsImdldEhpZXJhcmNoeSIsInZhbGlkIiwiZ2V0Tm9kZVN0YXRlIiwiJG5vZGUiLCJyZWxhdGlvbiIsIiR0YXJnZXQiLCJleGlzdCIsInZpc2libGUiLCJnZXRSZWxhdGVkTm9kZXMiLCJoaWRlUGFyZW50RW5kIiwidXBwZXJMZXZlbCIsImFkZENsYXNzIiwic2xpY2UiLCJyZW1vdmVBdHRyIiwiaGlkZVBhcmVudCIsIiR1cHBlckxldmVsIiwiaGlkZVNpYmxpbmdzIiwiJHBhcmVudCIsIm9uZSIsInNob3dQYXJlbnRFbmQiLCJub2RlIiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJzaG93UGFyZW50IiwicmVwYWludCIsImJpbmQiLCJzdG9wQWpheCIsIiRub2RlTGV2ZWwiLCJpc1Zpc2libGVOb2RlIiwiaW5kZXgiLCJoaWRlQ2hpbGRyZW5FbmQiLCJhbmltYXRlZE5vZGVzIiwiaXNWZXJ0aWNhbERlc2MiLCJsb3dlckxldmVsIiwicHJldkFsbCIsImFkZEJhY2siLCJsYXN0IiwiaGlkZUNoaWxkcmVuIiwiJGxvd2VyTGV2ZWwiLCIkYW5pbWF0ZWROb2RlcyIsImZpbHRlciIsImdldCIsInNob3dDaGlsZHJlbkVuZCIsInNob3dDaGlsZHJlbiIsIiRsZXZlbHMiLCJoaWRlU2libGluZ3NFbmQiLCIkbm9kZUNvbnRhaW5lciIsIm5vZGVDb250YWluZXIiLCJsaW5lcyIsIiRzaWJsaW5ncyIsIm5leHRBbGwiLCJwcmV2IiwiZW5kIiwic3dpdGNoSG9yaXpvbnRhbEFycm93IiwiJGxpbmVzIiwic2hvd1NpYmxpbmdzRW5kIiwidmlzaWJsZU5vZGVzIiwic2hvd1JlbGF0ZWRQYXJlbnRFbmQiLCJzaG93U2libGluZ3MiLCIkdmlzaWJsZU5vZGVzIiwic3RhcnRMb2FkaW5nIiwiJGVkZ2UiLCJub3QiLCJwcm9wIiwiZW5kTG9hZGluZyIsIiRhcnJvdyIsInRvZ2dsZUNsYXNzIiwiJHByZXZTaWIiLCIkbmV4dFNpYiIsIm5leHQiLCIkc2licyIsInNpYnNWaXNpYmxlIiwic3R5bGUiLCJvZmZzZXRXaWR0aCIsIm5vZGVFbnRlckxlYXZlSGFuZGxlciIsImZsYWciLCIkdG9wRWRnZSIsIiRib3R0b21FZGdlIiwiJGxlZnRFZGdlIiwibm9kZUNsaWNrSGFuZGxlciIsImxvYWROb2RlcyIsInJlbCIsImlzRW1wdHlPYmplY3QiLCJhZGRQYXJlbnQiLCJhZGRDaGlsZHJlbiIsImFkZFNpYmxpbmdzIiwiSGlkZUZpcnN0UGFyZW50RW5kIiwidG9wRWRnZSIsInRvcEVkZ2VDbGlja0hhbmRsZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwYXJlbnRTdGF0ZSIsImlzRnVuY3Rpb24iLCJub2RlRGF0YSIsImJvdHRvbUVkZ2VDbGlja0hhbmRsZXIiLCJjaGlsZHJlblN0YXRlIiwiaEVkZ2VDbGlja0hhbmRsZXIiLCIkaEVkZ2UiLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJleHBhbmRWTm9kZXNFbmQiLCJ2Tm9kZXMiLCJjb2xsYXBzZVZOb2Rlc0VuZCIsInRvZ2dsZVZOb2RlcyIsIiR0b2dnbGVCdG4iLCIkZGVzY1dyYXBwZXIiLCIkZGVzY2VuZGFudHMiLCIkY2hpbGRyZW4iLCJjcmVhdGVHaG9zdE5vZGUiLCIkbm9kZURpdiIsIm9yaWdFdmVudCIsImlzRmlyZWZveCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudE5TIiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJ0cmFuc1ZhbHVlcyIsInNjYWxlIiwic2V0QXR0cmlidXRlIiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwieE9mZnNldCIsIm9mZnNldFgiLCJ5T2Zmc2V0Iiwib2Zmc2V0WSIsImdob3N0Tm9kZVdyYXBwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic2V0RHJhZ0ltYWdlIiwiZmlsdGVyQWxsb3dlZERyb3BOb2RlcyIsIiRkcmFnZ2VkIiwiJGRyYWdab25lIiwiJGRyYWdIaWVyIiwiZHJvcENyaXRlcmlhIiwiZHJhZ3N0YXJ0SGFuZGxlciIsImRyYWdvdmVySGFuZGxlciIsImRyb3BFZmZlY3QiLCJkcmFnZW5kSGFuZGxlciIsImRyb3BIYW5kbGVyIiwiJGRyb3Bab25lIiwiZHJvcEV2ZW50IiwiZHJhZ2dlZE5vZGUiLCJkcmFnWm9uZSIsImRyb3Bab25lIiwiaXNEZWZhdWx0UHJldmVudGVkIiwiZHJvcENvbHNwYW4iLCJob3Jpem9udGFsRWRnZXMiLCJiZWZvcmUiLCIkZHJvcFNpYnMiLCJhZnRlciIsImRyYWdDb2xzcGFuIiwiJGRyYWdTaWJzIiwidG91Y2hzdGFydEhhbmRsZXIiLCJ0b3VjaEhhbmRsZWQiLCJ0b3VjaE1vdmVkIiwiaW5uZXJUZXh0IiwidG91Y2htb3ZlSGFuZGxlciIsImhhc0NsYXNzIiwic2ltdWxhdGVNb3VzZUV2ZW50IiwiJHRvdWNoaW5nTm9kZSIsImVsZW1lbnRGcm9tUG9pbnQiLCJ0b3VjaGluZ05vZGVFbGVtZW50IiwidG91Y2hUYXJnZXROb2RlIiwidG91Y2hlbmRIYW5kbGVyIiwiZmFrZUV2ZW50Rm9yRHJvcEhhbmRsZXIiLCJzaW11bGF0ZWRUeXBlIiwidG91Y2giLCJjaGFuZ2VkVG91Y2hlcyIsInNpbXVsYXRlZEV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsInNjcmVlblgiLCJzY3JlZW5ZIiwiZGlzcGF0Y2hFdmVudCIsImNyZWF0ZU5vZGUiLCJsZXZlbCIsImNoaWxkIiwicGFyZW50SWQiLCJkdGQiLCJEZWZlcnJlZCIsImNsYXNzTmFtZSIsIm5vZGVUZW1wbGF0ZSIsIm5vZGVDb250ZW50IiwidmVydGljYWxEZXB0aCIsIk51bWJlciIsInN1YnN0ciIsImljb24iLCJwcmVwZW5kIiwicmVzb2x2ZSIsInByb21pc2UiLCIkYXBwZW5kVG8iLCJjYWxsYmFjayIsIiRub2RlV3JhcHBlciIsIiRjaGlsZE5vZGVzIiwiaGFzQ2hpbGRyZW4iLCJpc1ZlcnRpY2FsTm9kZSIsIk9iamVjdCIsImtleXMiLCJ3aGVuIiwiaXNIaWRkZW4iLCJjb2xsYXBzZWQiLCJpc1ZlcnRpY2FsTGF5ZXIiLCJsaW5lTGF5ZXIiLCIkbm9kZUxheWVyIiwiJG5vZGVDZWxsIiwiYnVpbGRDaGlsZE5vZGUiLCJjb3VudCIsImJ1aWxkUGFyZW50Tm9kZSIsIiRjdXJyZW50Um9vdCIsIiR0YWJsZSIsImNvbXBsZW1lbnRMaW5lIiwiJG9uZVNpYmxpbmciLCJzaWJsaW5nQ291bnQiLCJleGlzdGluZ1NpYmxpZ0NvdW50IiwiYnVpbGRTaWJsaW5nTm9kZSIsIiRub2RlQ2hhcnQiLCJuZXdTaWJsaW5nQ291bnQiLCJpbnNlcnRQb3N0aW9uIiwiZmxvb3IiLCJjaGlsZENvdW50IiwiJHNpYmxpbmdUZHMiLCJ1bndyYXAiLCJub2RlQ291bnQiLCJyZW1vdmVOb2RlcyIsIiRtYXNrIiwic291cmNlQ2hhcnQiLCJodG1sMmNhbnZhcyIsIndpZHRoIiwiY2xpZW50SGVpZ2h0IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJvbmNsb25lIiwiY2xvbmVEb2MiLCJvbnJlbmRlcmVkIiwiY2FudmFzIiwiZG9jIiwiZG9jV2lkdGgiLCJkb2NIZWlnaHQiLCJqc1BERiIsImFkZEltYWdlIiwidG9EYXRhVVJMIiwic2F2ZSIsImlzV2Via2l0IiwiZG9jdW1lbnRFbGVtZW50IiwiaXNGZiIsInNpZGViYXIiLCJpc0VkZ2UiLCJhcHBOYW1lIiwiYXBwVmVyc2lvbiIsIm1zU2F2ZUJsb2IiLCJtc1RvQmxvYiIsInNlbGVjdG9yIiwidGhlbiIsImZuIiwib3JnY2hhcnQiXSwibWFwcGluZ3MiOiJBQVVBLGNBRUMsU0FBVUEsR0FDYSxpQkFBWEMsUUFBaUQsaUJBQW5CQSxPQUFPQyxRQUM5Q0YsRUFBUUcsUUFBUSxVQUFXQyxPQUFRQyxVQUVuQ0wsRUFBUU0sT0FBUUYsT0FBUUMsVUFKNUIsQ0FNRSxTQUFVRSxFQUFHSCxFQUFRQyxFQUFVRyxHQUMvQixJQUFJQyxFQUFXLFNBQVVDLEVBQU1DLEdBQzdCQyxLQUFLQyxnQkFBa0JOLEVBQUVHLEdBQ3pCRSxLQUFLRCxLQUFPQSxFQUNaQyxLQUFLRSxnQkFDSEMsVUFBYSxPQUNiQyxPQUFVLEtBQ1ZDLG9CQUFzQixFQUN0QkMsTUFBUyxJQUNUQyxXQUFjLEdBQ2RDLGNBQWdCLEVBQ2hC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YXJ0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBqUXVlcnkgT3JnQ2hhcnQgUGx1Z2luXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nL09yZ0NoYXJ0XG4gKlxuICogQ29weXJpZ2h0IDIwMTYsIGRhYmVuZ1xuICogaHR0cHM6Ly9naXRodWIuY29tL2RhYmVuZ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZTpcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgZmFjdG9yeShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuICB9XG59KGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcbiAgdmFyIE9yZ0NoYXJ0ID0gZnVuY3Rpb24gKGVsZW0sIG9wdHMpIHtcbiAgICB0aGlzLiRjaGFydENvbnRhaW5lciA9ICQoZWxlbSk7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLmRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgJ25vZGVUaXRsZSc6ICduYW1lJyxcbiAgICAgICdub2RlSWQnOiAnaWQnLFxuICAgICAgJ3RvZ2dsZVNpYmxpbmdzUmVzcCc6IGZhbHNlLFxuICAgICAgJ2RlcHRoJzogOTk5LFxuICAgICAgJ2NoYXJ0Q2xhc3MnOiAnJyxcbiAgICAgICdleHBvcnRCdXR0b24nOiBmYWxzZSxcbiAgICAgICdleHBvcnRGaWxlbmFtZSc6ICdPcmdDaGFydCcsXG4gICAgICAnZXhwb3J0RmlsZWV4dGVuc2lvbic6ICdwbmcnLFxuICAgICAgJ3BhcmVudE5vZGVTeW1ib2wnOiAnZmEtdXNlcnMnLFxuICAgICAgJ2RyYWdnYWJsZSc6IGZhbHNlLFxuICAgICAgJ2RpcmVjdGlvbic6ICd0MmInLFxuICAgICAgJ3Bhbic6IGZhbHNlLFxuICAgICAgJ3pvb20nOiBmYWxzZSxcbiAgICAgICd6b29taW5MaW1pdCc6IDcsXG4gICAgICAnem9vbW91dExpbWl0JzogMC41XG4gICAgfTtcbiAgfTtcbiAgLy9cbiAgT3JnQ2hhcnQucHJvdG90eXBlID0ge1xuICAgIC8vXG4gICAgaW5pdDogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRPcHRpb25zLCB0aGlzLm9wdHMsIG9wdHMpO1xuICAgICAgLy8gYnVpbGQgdGhlIG9yZy1jaGFydFxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgaWYgKHRoaXMuJGNoYXJ0KSB7XG4gICAgICAgIHRoaXMuJGNoYXJ0LnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgdmFyIGRhdGEgPSB0aGlzLm9wdGlvbnMuZGF0YTtcbiAgICAgIHZhciAkY2hhcnQgPSB0aGlzLiRjaGFydCA9ICQoJzxkaXY+Jywge1xuICAgICAgICAnZGF0YSc6IHsgJ29wdGlvbnMnOiB0aGlzLm9wdGlvbnMgfSxcbiAgICAgICAgJ2NsYXNzJzogJ29yZ2NoYXJ0JyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICh0aGlzLm9wdGlvbnMuZGlyZWN0aW9uICE9PSAndDJiJyA/ICcgJyArIHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gOiAnJyksXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCEkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICRjaGFydC5maW5kKCcubm9kZS5mb2N1c2VkJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnRyaWdnZXJJbml0RXZlbnQoKTtcbiAgICAgIH1cbiAgICAgIGlmICgkLnR5cGUoZGF0YSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgJCkgeyAvLyB1bCBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMuYnVpbGRKc29uRFMoZGF0YS5jaGlsZHJlbigpKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gbG9jYWwganNvbiBkYXRhc291cmNlXG4gICAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoaXMub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoaXMuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAndXJsJzogZGF0YSxcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbidcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICB0aGF0LmJ1aWxkSGllcmFyY2h5KCRjaGFydCwgdGhhdC5vcHRpb25zLmFqYXhVUkwgPyBkYXRhIDogdGhhdC5hdHRhY2hSZWwoZGF0YSwgJzAwJyksIDAsIHRoYXQub3B0aW9ucyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yVGhyb3duKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAkY2hhcnQuY2hpbGRyZW4oJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkY2hhcnQpO1xuXG4gICAgICAvLyBhcHBlbmQgdGhlIGV4cG9ydCBidXR0b25cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhwb3J0QnV0dG9uICYmICEkY2hhcnRDb250YWluZXIuZmluZCgnLm9jLWV4cG9ydC1idG4nKS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hFeHBvcnRCdXR0b24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wYW4pIHtcbiAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuem9vbSkge1xuICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICB0cmlnZ2VySW5pdEV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaW5pdFRpbWU6XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtdXRhdGlvbnNbaV0uYWRkZWROb2Rlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucygnb3JnY2hhcnQnKSkge1xuICAgICAgICAgICAgICBpZiAodGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgJiYgdHlwZW9mIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQodGhhdC4kY2hhcnQpO1xuICAgICAgICAgICAgICAgIHZhciBpbml0RXZlbnQgPSAkLkV2ZW50KCdpbml0Lm9yZ2NoYXJ0Jyk7XG4gICAgICAgICAgICAgICAgdGhhdC4kY2hhcnQudHJpZ2dlcihpbml0RXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrIGluaXRUaW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIG1vLm9ic2VydmUodGhpcy4kY2hhcnRDb250YWluZXJbMF0sIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hFeHBvcnRCdXR0b246IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkZXhwb3J0QnRuID0gJCgnPGJ1dHRvbj4nLCB7XG4gICAgICAgICdjbGFzcyc6ICdvYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSxcbiAgICAgICAgJ3RleHQnOiAnRXhwb3J0JyxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGF0LmV4cG9ydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmFwcGVuZCgkZXhwb3J0QnRuKTtcbiAgICB9LFxuICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRzLCB2YWwpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09ICdwYW4nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzID09PSAnem9vbScpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAob3B0cy5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5pbml0KG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5wYW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5wYW4pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCB8fCAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSkge1xuICAgICAgICAkY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmNzcygnY3Vyc29yJywgJ21vdmUnKS5kYXRhKCdwYW5uaW5nJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgbGFzdFggPSAwO1xuICAgICAgdmFyIGxhc3RZID0gMDtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgICB2YXIgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzRdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbNV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFsxMl0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFsxM10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc3RhcnRYID0gMDtcbiAgICAgIHZhciBzdGFydFkgPSAwO1xuICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgIHN0YXJ0WCA9IGUucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgIHN0YXJ0WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Lm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJyxmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3WCA9IDA7XG4gICAgICAgIHZhciBuZXdZID0gMDtcbiAgICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgICAgbmV3WCA9IGUucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICAgIG5ld1ggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1hdHJpeFs0XSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbNV0gPSAnICcgKyBuZXdZICsgJyknO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRyaXhbMTJdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFsxM10gPSAnICcgKyBuZXdZO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBtYXRyaXguam9pbignLCcpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhbkVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICBlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jykub2ZmKCdtb3VzZW1vdmUnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgeyAnY2hhcnQnOiB0aGlzLiRjaGFydCB9LCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB1bmJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgdGhpcy4kY2hhcnQub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21XaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbmV3U2NhbGUgID0gMSArIChlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMCA/IC0wLjIgOiAwLjIpO1xuICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIG5ld1NjYWxlKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgdHJ1ZSk7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21pbmdIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgZmFsc2UpO1xuICAgICAgICB2YXIgZGlmZiA9IG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnKSAtIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcpO1xuICAgICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMS4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAwLjgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbignd2hlZWwnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd0b3VjaHN0YXJ0JywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNoZW5kJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgdW5iaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd3aGVlbCcsIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnLCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2hlbmQnLCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0UGluY2hEaXN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIE1hdGguc3FydCgoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpICogKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0Q2hhcnRTY2FsZTogZnVuY3Rpb24gKCRjaGFydCwgbmV3U2NhbGUpIHtcbiAgICAgIHZhciBvcHRzID0gJGNoYXJ0LmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIHZhciBtYXRyaXggPSAnJztcbiAgICAgIHZhciB0YXJnZXRTY2FsZSA9IDE7XG4gICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSBNYXRoLmFicyh3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbM10pICogbmV3U2NhbGUpO1xuICAgICAgICAgIGlmICh0YXJnZXRTY2FsZSA+IG9wdHMuem9vbW91dExpbWl0ICYmIHRhcmdldFNjYWxlIDwgb3B0cy56b29taW5MaW1pdCkge1xuICAgICAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgbGFzdFRmICsgJyBzY2FsZSgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFNjYWxlID0gTWF0aC5hYnMod2luZG93LnBhcnNlRmxvYXQobWF0cml4WzFdKSAqIG5ld1NjYWxlKTtcbiAgICAgICAgICBpZiAodGFyZ2V0U2NhbGUgPiBvcHRzLnpvb21vdXRMaW1pdCAmJiB0YXJnZXRTY2FsZSA8IG9wdHMuem9vbWluTGltaXQpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsIGxhc3RUZiArICcgc2NhbGUzZCgnICsgbmV3U2NhbGUgKyAnLCcgKyBuZXdTY2FsZSArICcsIDEpJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJ1aWxkSnNvbkRTOiBmdW5jdGlvbiAoJGxpKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgc3ViT2JqID0ge1xuICAgICAgICAnbmFtZSc6ICRsaS5jb250ZW50cygpLmVxKDApLnRleHQoKS50cmltKCksXG4gICAgICAgICdyZWxhdGlvbnNoaXAnOiAoJGxpLnBhcmVudCgpLnBhcmVudCgpLmlzKCdsaScpID8gJzEnOiAnMCcpICsgKCRsaS5zaWJsaW5ncygnbGknKS5sZW5ndGggPyAxOiAwKSArICgkbGkuY2hpbGRyZW4oJ3VsJykubGVuZ3RoID8gMSA6IDApXG4gICAgICB9O1xuICAgICAgaWYgKCRsaS5hdHRyKCdkYXRhLWlkJykpIHtcbiAgICAgICAgc3ViT2JqLmlkID0gJGxpLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgIH1cbiAgICAgICRsaS5jaGlsZHJlbigndWwnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQuYnVpbGRKc29uRFMoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBhdHRhY2hSZWw6IGZ1bmN0aW9uIChkYXRhLCBmbGFncykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgZGF0YS5yZWxhdGlvbnNoaXAgPSBmbGFncyArIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdGhhdC5hdHRhY2hSZWwoaXRlbSwgJzEnICsgKGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMSA/IDEgOiAwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvL1xuICAgIGxvb3BDaGFydDogZnVuY3Rpb24gKCRjaGFydCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0ciA9ICRjaGFydC5maW5kKCd0cjpmaXJzdCcpO1xuICAgICAgdmFyIHN1Yk9iaiA9IHsgJ2lkJzogJHRyLmZpbmQoJy5ub2RlJylbMF0uaWQgfTtcbiAgICAgICR0ci5zaWJsaW5ncygnOmxhc3QnKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc3ViT2JqLmNoaWxkcmVuKSB7IHN1Yk9iai5jaGlsZHJlbiA9IFtdOyB9XG4gICAgICAgIHN1Yk9iai5jaGlsZHJlbi5wdXNoKHRoYXQubG9vcENoYXJ0KCQodGhpcykpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1Yk9iajtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0SGllcmFyY2h5OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuJGNoYXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ0Vycm9yOiBvcmdjaGFydCBkb2VzIG5vdCBleGlzdCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy4kY2hhcnQuZmluZCgnLm5vZGUnKS5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBub2RlcyBkbyBub3QgZXhpc3QnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLiRjaGFydC5maW5kKCcubm9kZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlkKSB7XG4gICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Vycm9yOiBBbGwgbm9kZXMgb2Ygb3JnaGNhcnQgdG8gYmUgZXhwb3J0ZWQgbXVzdCBoYXZlIGRhdGEtaWQgYXR0cmlidXRlISc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5sb29wQ2hhcnQodGhpcy4kY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIHZhciByZWxhdGlvbiA9IHJlbGF0aW9uIHx8ICdzZWxmJztcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy5oaWRkZW4nKSB8fCAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlbGF0aW9uID09PSAnY2hpbGRyZW4nKSB7XG4gICAgICAgICR0YXJnZXQgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6bGFzdCcpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICBpZiAoJHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISR0YXJnZXQuaXMoJy5oaWRkZW4nKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGFyZ2V0ID0gJG5vZGU7XG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGlmICghKCgkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJy5ub2RlcycpLmlzKCcuaGlkZGVuJykpIHx8XG4gICAgICAgICAgICAoJHRhcmdldC5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLmxlbmd0aCAmJiAkdGFyZ2V0LmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuaXMoJy5oaWRkZW4nKSkgfHxcbiAgICAgICAgICAgICgkdGFyZ2V0LnBhcmVudCgpLmlzKCdsaScpICYmICgkdGFyZ2V0LmNsb3Nlc3QoJ3VsJykuaXMoJy5oaWRkZW4nKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ3ZlcnRpY2FsTm9kZXMnKS5pcygnLmhpZGRlbicpKSlcbiAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXR1cm4geyAnZXhpc3QnOiB0cnVlLCAndmlzaWJsZSc6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHsgJ2V4aXN0JzogdHJ1ZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyAnZXhpc3QnOiBmYWxzZSwgJ3Zpc2libGUnOiBmYWxzZSB9O1xuICAgIH0sXG4gICAgLy8gZmluZCB0aGUgcmVsYXRlZCBub2Rlc1xuICAgIGdldFJlbGF0ZWROb2RlczogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgaWYgKCEkbm9kZSB8fCAhKCRub2RlIGluc3RhbmNlb2YgJCkgfHwgISRub2RlLmlzKCcubm9kZScpKSB7XG4gICAgICAgIHJldHVybiAkKCk7XG4gICAgICB9XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5wYXJlbnQoKS5jaGlsZHJlbignOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICQoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGhpZGVQYXJlbnRFbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBldmVudC5kYXRhLnVwcGVyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpLnNsaWNlKDEpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBhbmNlc3RvciBub2RlIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKTtcbiAgICAgIGlmICgkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzXG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgbGluZXNcbiAgICAgIHZhciAkbGluZXMgPSAkdXBwZXJMZXZlbC5zbGljZSgxKTtcbiAgICAgICRsaW5lcy5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAvLyBoaWRlIHRoZSBzdXBlcmlvciBub2RlcyB3aXRoIHRyYW5zaXRpb25cbiAgICAgIHZhciAkcGFyZW50ID0gJHVwcGVyTGV2ZWwuZXEoMCkuZmluZCgnLm5vZGUnKTtcbiAgICAgIGlmICh0aGlzLmdldE5vZGVTdGF0ZSgkcGFyZW50KS52aXNpYmxlKSB7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3VwcGVyTGV2ZWwnOiAkdXBwZXJMZXZlbCB9LCB0aGlzLmhpZGVQYXJlbnRFbmQpO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRwYXJlbnQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2hvd1BhcmVudEVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgJG5vZGUgPSBldmVudC5kYXRhLm5vZGU7XG4gICAgICAkKGV2ZW50LnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3NsaWRpbmcnKTtcbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoVmVydGljYWxBcnJvdygkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93UGFyZW50OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIC8vIGp1c3Qgc2hvdyBvbmx5IG9uZSBzdXBlcmlvciBsZXZlbFxuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxuICAgICAgJHVwcGVyTGV2ZWwuZXEoMikuY2hpbGRyZW4oKS5zbGljZSgxLCAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8gc2hvdyBwYXJlbnQgbm9kZSB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyICRwYXJlbnQgPSAkdXBwZXJMZXZlbC5lcSgwKS5maW5kKCcubm9kZScpO1xuICAgICAgdGhpcy5yZXBhaW50KCRwYXJlbnRbMF0pO1xuICAgICAgJHBhcmVudC5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnbm9kZSc6ICRub2RlIH0sIHRoaXMuc2hvd1BhcmVudEVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIHN0b3BBamF4OiBmdW5jdGlvbiAoJG5vZGVMZXZlbCkge1xuICAgICAgaWYgKCRub2RlTGV2ZWwuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGVMZXZlbC5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBpc1Zpc2libGVOb2RlOiBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE5vZGVTdGF0ZSgkKGVsZW0pKS52aXNpYmxlO1xuICAgIH0sXG4gICAgLy9cbiAgICBoaWRlQ2hpbGRyZW5FbmQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAoZXZlbnQuZGF0YS5pc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICBldmVudC5kYXRhLmxvd2VyTGV2ZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLmNsb3Nlc3QoJy5ub2RlcycpLnByZXZBbGwoJy5saW5lcycpLnJlbW92ZUF0dHIoJ3N0eWxlJykuYWRkQmFjaygpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgZXZlbnQuZGF0YS5sb3dlckxldmVsLmxhc3QoKS5maW5kKCcudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzSW5BY3Rpb24oZXZlbnQuZGF0YS5ub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaFZlcnRpY2FsQXJyb3coZXZlbnQuZGF0YS5ub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHJlY3Vyc2l2ZWx5IGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZUNoaWxkcmVuOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciAkbG93ZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHRoaXMuc3RvcEFqYXgoJGxvd2VyTGV2ZWwubGFzdCgpKTtcbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRsb3dlckxldmVsLmxhc3QoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgICB2YXIgaXNWZXJ0aWNhbERlc2MgPSAkbG93ZXJMZXZlbC5sYXN0KCkuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoIWlzVmVydGljYWxEZXNjKSB7XG4gICAgICAgICRhbmltYXRlZE5vZGVzLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlcGFpbnQoJGFuaW1hdGVkTm9kZXMuZ2V0KDApKTtcbiAgICAgICRhbmltYXRlZE5vZGVzLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgeyAnYW5pbWF0ZWROb2Rlcyc6ICRhbmltYXRlZE5vZGVzLCAnbG93ZXJMZXZlbCc6ICRsb3dlckxldmVsLCAnaXNWZXJ0aWNhbERlc2MnOiBpc1ZlcnRpY2FsRGVzYywgJ25vZGUnOiAkbm9kZSB9LCB0aGlzLmhpZGVDaGlsZHJlbkVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2hvd0NoaWxkcmVuRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgIGV2ZW50LmRhdGEuYW5pbWF0ZWROb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGxldmVscyA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsZXZlbHMuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICB2YXIgJGFuaW1hdGVkTm9kZXMgPSBpc1ZlcnRpY2FsRGVzY1xuICAgICAgICA/ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKVxuICAgICAgICA6ICRsZXZlbHMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmVxKDIpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpO1xuICAgICAgLy8gdGhlIHR3byBmb2xsb3dpbmcgc3RhdGVtZW50cyBhcmUgdXNlZCB0byBlbmZvcmNlIGJyb3dzZXIgdG8gcmVwYWludFxuICAgICAgdGhpcy5yZXBhaW50KCRhbmltYXRlZE5vZGVzLmdldCgwKSk7XG4gICAgICAkYW5pbWF0ZWROb2Rlcy5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSwgJ2FuaW1hdGVkTm9kZXMnOiAkYW5pbWF0ZWROb2RlcyB9LCB0aGlzLnNob3dDaGlsZHJlbkVuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgaGlkZVNpYmxpbmdzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9IGV2ZW50LmRhdGEubm9kZUNvbnRhaW5lcjtcbiAgICAgIHZhciBkaXJlY3Rpb24gPSBldmVudC5kYXRhLmRpcmVjdGlvbjtcbiAgICAgIGV2ZW50LmRhdGEubGluZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIHZhciAkc2libGluZ3MgPSBkaXJlY3Rpb24gPyAoZGlyZWN0aW9uID09PSAnbGVmdCcgPyAkbm9kZUNvbnRhaW5lci5wcmV2QWxsKCc6bm90KC5oaWRkZW4pJykgOiAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCc6bm90KC5oaWRkZW4pJykpIDogJG5vZGVDb250YWluZXIuc2libGluZ3MoKTtcbiAgICAgICRub2RlQ29udGFpbmVyLmNsb3Nlc3QoJy5ub2RlcycpLnByZXYoKS5jaGlsZHJlbignOm5vdCguaGlkZGVuKScpXG4gICAgICAgIC5zbGljZSgxLCBkaXJlY3Rpb24gPyAkc2libGluZ3MubGVuZ3RoICogMiArIDEgOiAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgZXZlbnQuZGF0YS5hbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAkc2libGluZ3MuZmluZCgnLm5vZGU6Z3QoMCknKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2xpZGUtbGVmdCBzbGlkZS1yaWdodCcpLmFkZENsYXNzKCdzbGlkZS11cCcpO1xuICAgICAgJHNpYmxpbmdzLmZpbmQoJy5saW5lcywgLm5vZGVzLCAudmVydGljYWxOb2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAuZW5kKCkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBoaWRlIHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciAkbm9kZUNvbnRhaW5lciA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICBpZiAoJG5vZGVDb250YWluZXIuc2libGluZ3MoKS5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdpbkFqYXgnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSkuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlJykuZmlsdGVyKHRoaXMuaXNWaXNpYmxlTm9kZS5iaW5kKHRoaXMpKS5hZGRDbGFzcygnc2xpZGluZyBzbGlkZS1yaWdodCcpO1xuICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGUnKS5maWx0ZXIodGhpcy5pc1Zpc2libGVOb2RlLmJpbmQodGhpcykpLmFkZENsYXNzKCdzbGlkaW5nIHNsaWRlLWxlZnQnKTtcbiAgICAgIH1cbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNsaWRpbmcnKTtcbiAgICAgIHZhciAkbGluZXMgPSAkYW5pbWF0ZWROb2Rlcy5jbG9zZXN0KCcubm9kZXMnKS5wcmV2QWxsKCcubGluZXMnKS5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAkYW5pbWF0ZWROb2Rlcy5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICdub2RlJzogJG5vZGUsICdub2RlQ29udGFpbmVyJzogJG5vZGVDb250YWluZXIsICdkaXJlY3Rpb24nOiBkaXJlY3Rpb24sICdhbmltYXRlZE5vZGVzJzogJGFuaW1hdGVkTm9kZXMsICdsaW5lcyc6ICRsaW5lcyB9LCB0aGlzLmhpZGVTaWJsaW5nc0VuZC5iaW5kKHRoaXMpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2hvd1NpYmxpbmdzRW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9IGV2ZW50LmRhdGEubm9kZTtcbiAgICAgIGV2ZW50LmRhdGEudmlzaWJsZU5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkaW5nJyk7XG4gICAgICBpZiAodGhpcy5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICB0aGlzLnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBzaG93UmVsYXRlZFBhcmVudEVuZDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICQoZXZlbnQudGFyZ2V0KS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgIH0sXG4gICAgLy8gc2hvdyB0aGUgc2libGluZyBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICBzaG93U2libGluZ3M6IGZ1bmN0aW9uICgkbm9kZSwgZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAvLyBmaXJzdGx5LCBzaG93IHRoZSBzaWJsaW5nIHRkIHRhZ3NcbiAgICAgIHZhciAkc2libGluZ3MgPSAkKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldkFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkc2libGluZ3MgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHRBbGwoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICAvLyBzZWNvbmRseSwgc2hvdyB0aGUgbGluZXNcbiAgICAgIHZhciAkdXBwZXJMZXZlbCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKGRpcmVjdGlvbikge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnNsaWNlKDAsICRzaWJsaW5ncy5sZW5ndGggKiAyKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdXBwZXJMZXZlbC5lcSgyKS5jaGlsZHJlbignLmhpZGRlbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXJkbHksIGRvIHNvbWUgY2xlYW5pbmcgc3R1ZmZcbiAgICAgIGlmICghdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlKSB7XG4gICAgICAgICR1cHBlckxldmVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgdmFyIHBhcmVudCA9ICR1cHBlckxldmVsLmZpbmQoJy5ub2RlJylbMF07XG4gICAgICAgIHRoaXMucmVwYWludChwYXJlbnQpO1xuICAgICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoJ3NsaWRpbmcnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIHRoaXMuc2hvd1JlbGF0ZWRQYXJlbnRFbmQpO1xuICAgICAgfVxuICAgICAgLy8gbGFzdGx5LCBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIHdpdGggYW5pbWF0aW9uXG4gICAgICB2YXIgJHZpc2libGVOb2RlcyA9ICRzaWJsaW5ncy5maW5kKCcubm9kZScpLmZpbHRlcih0aGlzLmlzVmlzaWJsZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLnJlcGFpbnQoJHZpc2libGVOb2Rlcy5nZXQoMCkpO1xuICAgICAgJHZpc2libGVOb2Rlcy5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAkdmlzaWJsZU5vZGVzLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ25vZGUnOiAkbm9kZSwgJ3Zpc2libGVOb2Rlcyc6ICR2aXNpYmxlTm9kZXMgfSwgdGhpcy5zaG93U2libGluZ3NFbmQuYmluZCh0aGlzKSk7XG4gICAgfSxcbiAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBzdGFydExvYWRpbmc6IGZ1bmN0aW9uICgkZWRnZSkge1xuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0O1xuICAgICAgaWYgKHR5cGVvZiAkY2hhcnQuZGF0YSgnaW5BamF4JykgIT09ICd1bmRlZmluZWQnICYmICRjaGFydC5kYXRhKCdpbkFqYXgnKSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRlZGdlLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRlZGdlLnBhcmVudCgpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+JylcbiAgICAgICAgLmNoaWxkcmVuKCkubm90KCcuc3Bpbm5lcicpLmNzcygnb3BhY2l0eScsIDAuMik7XG4gICAgICAkY2hhcnQuZGF0YSgnaW5BamF4JywgdHJ1ZSk7XG4gICAgICAkKCcub2MtZXhwb3J0LWJ0bicgKyAodGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhpcy5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBlbmRMb2FkaW5nOiBmdW5jdGlvbiAoJGVkZ2UpIHtcbiAgICAgIHZhciAkbm9kZSA9ICRlZGdlLnBhcmVudCgpO1xuICAgICAgJGVkZ2UucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJG5vZGUuZmluZCgnLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgICRub2RlLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIHRoaXMuJGNoYXJ0LmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgICQoJy5vYy1leHBvcnQtYnRuJyArICh0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyB0aGlzLm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSkucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfSxcbiAgICAvLyB3aGV0aGVyIHRoZSBjdXJzb3IgaXMgaG92ZXJpbmcgb3ZlciB0aGUgbm9kZVxuICAgIGlzSW5BY3Rpb246IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgcmV0dXJuICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLmF0dHIoJ2NsYXNzJykuaW5kZXhPZignZmEtJykgPiAtMSA/IHRydWUgOiBmYWxzZTtcbiAgICB9LFxuICAgIC8vXG4gICAgc3dpdGNoVmVydGljYWxBcnJvdzogZnVuY3Rpb24gKCRhcnJvdykge1xuICAgICAgJGFycm93LnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicpO1xuICAgIH0sXG4gICAgLy9cbiAgICBzd2l0Y2hIb3Jpem9udGFsQXJyb3c6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIG9wdHMgPSAkbm9kZS5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3AgJiYgKHR5cGVvZiBvcHRzLmFqYXhVUkwgPT09ICd1bmRlZmluZWQnIHx8ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLmRhdGEoJ3NpYmxpbmdzTG9hZGVkJykpKSB7XG4gICAgICAgIHZhciAkcHJldlNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkucHJldigpO1xuICAgICAgICBpZiAoJHByZXZTaWIubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKCRwcmV2U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgaWYgKCRuZXh0U2liLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkbmV4dFNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyICRzaWJzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICB2YXIgc2lic1Zpc2libGUgPSAkc2licy5sZW5ndGggPyAhJHNpYnMuaXMoJy5oaWRkZW4nKSA6IGZhbHNlO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcsICFzaWJzVmlzaWJsZSk7XG4gICAgICAgICRub2RlLmNoaWxkcmVuKCcucmlnaHRFZGdlJykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcsIHNpYnNWaXNpYmxlKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1yaWdodCcsICFzaWJzVmlzaWJsZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIHJlcGFpbnQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBub2RlLnN0eWxlLm9mZnNldFdpZHRoID0gbm9kZS5vZmZzZXRXaWR0aDtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgbm9kZUVudGVyTGVhdmVIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLCBmbGFnID0gZmFsc2U7XG4gICAgICB2YXIgJHRvcEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKTtcbiAgICAgIHZhciAkcmlnaHRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKTtcbiAgICAgIHZhciAkYm90dG9tRWRnZSA9ICRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpO1xuICAgICAgdmFyICRsZWZ0RWRnZSA9ICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKTtcbiAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2VlbnRlcicpIHtcbiAgICAgICAgaWYgKCR0b3BFZGdlLmxlbmd0aCkge1xuICAgICAgICAgIGZsYWcgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGU7XG4gICAgICAgICAgJHRvcEVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkYm90dG9tRWRnZS5sZW5ndGgpIHtcbiAgICAgICAgICBmbGFnID0gdGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpLnZpc2libGU7XG4gICAgICAgICAgJGJvdHRvbUVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsICFmbGFnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcsIGZsYWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkbGVmdEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCBmYS1jaGV2cm9uLWRvd24gZmEtY2hldnJvbi1yaWdodCBmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgbm9kZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGlzLiRjaGFydC5maW5kKCcuZm9jdXNlZCcpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgIH0sXG4gICAgLy8gbG9hZCBuZXcgbm9kZXMgYnkgYWpheFxuICAgIGxvYWROb2RlczogZnVuY3Rpb24gKHJlbCwgdXJsLCAkZWRnZSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAkLmFqYXgoeyAndXJsJzogdXJsLCAnZGF0YVR5cGUnOiAnanNvbicgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmICh0aGF0LiRjaGFydC5kYXRhKCdpbkFqYXgnKSkge1xuICAgICAgICAgIGlmIChyZWwgPT09ICdwYXJlbnQnKSB7XG4gICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChkYXRhKSkge1xuICAgICAgICAgICAgICB0aGF0LmFkZFBhcmVudCgkZWRnZS5wYXJlbnQoKSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChyZWwgPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICB0aGF0LmFkZENoaWxkcmVuKCRlZGdlLnBhcmVudCgpLCBkYXRhLCAkLmV4dGVuZCh7fSwgb3B0cywgeyBkZXB0aDogMCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNpYmxpbmdzIHx8IGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgdGhhdC5hZGRTaWJsaW5ncygkZWRnZS5wYXJlbnQoKSwgZGF0YSwgb3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmZhaWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCAnICsgcmVsICsgJyBkYXRhJyk7XG4gICAgICB9KVxuICAgICAgLmFsd2F5cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoYXQuZW5kTG9hZGluZygkZWRnZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgSGlkZUZpcnN0UGFyZW50RW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkdG9wRWRnZSA9IGV2ZW50LmRhdGEudG9wRWRnZTtcbiAgICAgIHZhciAkbm9kZSA9ICR0b3BFZGdlLnBhcmVudCgpO1xuICAgICAgaWYgKHRoaXMuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgdGhpcy5zd2l0Y2hWZXJ0aWNhbEFycm93KCR0b3BFZGdlKTtcbiAgICAgICAgdGhpcy5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICB0b3BFZGdlQ2xpY2tIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICR0b3BFZGdlID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyICRub2RlID0gJChldmVudC5kZWxlZ2F0ZVRhcmdldCk7XG4gICAgICB2YXIgcGFyZW50U3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpO1xuICAgICAgaWYgKHBhcmVudFN0YXRlLmV4aXN0KSB7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCc6Zmlyc3QnKS5maW5kKCcubm9kZScpO1xuICAgICAgICBpZiAoJHBhcmVudC5pcygnLnNsaWRpbmcnKSkgeyByZXR1cm47IH1cbiAgICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgIGlmIChwYXJlbnRTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5oaWRlUGFyZW50KCRub2RlKTtcbiAgICAgICAgICAkcGFyZW50Lm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3RvcEVkZ2UnOiAkdG9wRWRnZSB9LCB0aGlzLkhpZGVGaXJzdFBhcmVudEVuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgYW5jZXN0b3JzIGFuZCBzaWJsaW5nc1xuICAgICAgICAgIHRoaXMuc2hvd1BhcmVudCgkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBwYXJlbnQgbm9kZSBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIHN0YXJ0IHVwIGxvYWRpbmcgc3RhdHVzXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TG9hZGluZygkdG9wRWRnZSkpIHtcbiAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICB2YXIgdXJsID0gJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5wYXJlbnQpID8gb3B0cy5hamF4VVJMLnBhcmVudChldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5wYXJlbnQgKyAkbm9kZVswXS5pZDtcbiAgICAgICAgICB0aGlzLmxvYWROb2RlcygncGFyZW50JywgdXJsLCAkdG9wRWRnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYm90dG9tRWRnZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHZhciAkYm90dG9tRWRnZSA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciAkbm9kZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgdmFyIGNoaWxkcmVuU3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJyk7XG4gICAgICBpZiAoY2hpbGRyZW5TdGF0ZS5leGlzdCkge1xuICAgICAgICB2YXIgJGNoaWxkcmVuID0gJG5vZGUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmxhc3QnKTtcbiAgICAgICAgaWYgKCRjaGlsZHJlbi5maW5kKCcuc2xpZGluZycpLmxlbmd0aCkgeyByZXR1cm47IH1cbiAgICAgICAgLy8gaGlkZSB0aGUgZGVzY2VuZGFudCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAgICAgICAgaWYgKGNoaWxkcmVuU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuaGlkZUNoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gc2hvdyB0aGUgZGVzY2VuZGFudHNcbiAgICAgICAgICB0aGlzLnNob3dDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIGxvYWQgdGhlIG5ldyBjaGlsZHJlbiBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIG5vZGUgYnkgYWpheCByZXF1ZXN0XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TG9hZGluZygkYm90dG9tRWRnZSkpIHtcbiAgICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICB2YXIgdXJsID0gJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5jaGlsZHJlbikgPyBvcHRzLmFqYXhVUkwuY2hpbGRyZW4oZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuY2hpbGRyZW4gKyAkbm9kZVswXS5pZDtcbiAgICAgICAgICB0aGlzLmxvYWROb2RlcygnY2hpbGRyZW4nLCB1cmwsICRib3R0b21FZGdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBoRWRnZUNsaWNrSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHZhciAkaEVkZ2UgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgJG5vZGUgPSAkKGV2ZW50LmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgdmFyIHNpYmxpbmdzU3RhdGUgPSB0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJyk7XG4gICAgICBpZiAoc2libGluZ3NTdGF0ZS5leGlzdCkge1xuICAgICAgICB2YXIgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgICBpZiAoJHNpYmxpbmdzLmZpbmQoJy5zbGlkaW5nJykubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgICAgICBpZiAob3B0cy50b2dnbGVTaWJsaW5nc1Jlc3ApIHtcbiAgICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgICB2YXIgJG5leHRTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgICBpZiAoJGhFZGdlLmlzKCcubGVmdEVkZ2UnKSkge1xuICAgICAgICAgICAgaWYgKCRwcmV2U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUsICdsZWZ0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSwgJ2xlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCRuZXh0U2liLmlzKCcuaGlkZGVuJykpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaG93U2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5oaWRlU2libGluZ3MoJG5vZGUsICdyaWdodCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2libGluZ3NTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NpYmxpbmdzKCRub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRMb2FkaW5nKCRoRWRnZSkpIHtcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJG5vZGVbMF0uaWQ7XG4gICAgICAgICAgdmFyIHVybCA9ICh0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLmV4aXN0KSA/XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5zaWJsaW5ncykgPyBvcHRzLmFqYXhVUkwuc2libGluZ3MoZXZlbnQuZGF0YS5ub2RlRGF0YSkgOiBvcHRzLmFqYXhVUkwuc2libGluZ3MgKyBub2RlSWQpIDpcbiAgICAgICAgICAgICgkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLmZhbWlsaWVzKSA/IG9wdHMuYWpheFVSTC5mYW1pbGllcyhldmVudC5kYXRhLm5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5mYW1pbGllcyArIG5vZGVJZCk7XG4gICAgICAgICAgdGhpcy5sb2FkTm9kZXMoJ3NpYmxpbmdzJywgdXJsLCAkaEVkZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGV4cGFuZFZOb2Rlc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5kYXRhLnZOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgIH0sXG4gICAgLy9cbiAgICBjb2xsYXBzZVZOb2Rlc0VuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5kYXRhLnZOb2Rlcy5yZW1vdmVDbGFzcygnc2xpZGluZycpLmNsb3Nlc3QoJ3VsJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgIH0sXG4gICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcbiAgICB0b2dnbGVWTm9kZXM6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICR0b2dnbGVCdG4gPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgJGRlc2NXcmFwcGVyID0gJHRvZ2dsZUJ0bi5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICB2YXIgJGRlc2NlbmRhbnRzID0gJGRlc2NXcmFwcGVyLmZpbmQoJy5ub2RlJyk7XG4gICAgICB2YXIgJGNoaWxkcmVuID0gJGRlc2NXcmFwcGVyLmNoaWxkcmVuKCkuY2hpbGRyZW4oJy5ub2RlJyk7XG4gICAgICBpZiAoJGNoaWxkcmVuLmlzKCcuc2xpZGluZycpKSB7IHJldHVybjsgfVxuICAgICAgJHRvZ2dsZUJ0bi50b2dnbGVDbGFzcygnZmEtcGx1cy1zcXVhcmUgZmEtbWludXMtc3F1YXJlJyk7XG4gICAgICBpZiAoJGRlc2NlbmRhbnRzLmVxKDApLmlzKCcuc2xpZGUtdXAnKSkge1xuICAgICAgICAkZGVzY1dyYXBwZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLnJlcGFpbnQoJGNoaWxkcmVuLmdldCgwKSk7XG4gICAgICAgICRjaGlsZHJlbi5hZGRDbGFzcygnc2xpZGluZycpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIHsgJ3ZOb2Rlcyc6ICRjaGlsZHJlbiB9LCB0aGlzLmV4cGFuZFZOb2Rlc0VuZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRpbmcgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCB7ICd2Tm9kZXMnOiAkZGVzY2VuZGFudHMgfSwgdGhpcy5jb2xsYXBzZVZOb2Rlc0VuZCk7XG4gICAgICAgICRkZXNjZW5kYW50cy5maW5kKCcudG9nZ2xlQnRuJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzLXNxdWFyZScpLmFkZENsYXNzKCdmYS1wbHVzLXNxdWFyZScpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBjcmVhdGVHaG9zdE5vZGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRub2RlRGl2ID0gJChldmVudC50YXJnZXQpO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgb3JpZ0V2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgICAgb3JpZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2h0bWwnLCAnaGFjayBmb3IgZmlyZWZveCcpO1xuICAgICAgfVxuICAgICAgdmFyIGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xuICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xuICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpO1xuICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuYXBwZW5kKGdob3N0Tm9kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnaG9zdE5vZGUgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jaGlsZHJlbignLmdob3N0LW5vZGUnKS5nZXQoMCk7XG4gICAgICAgIG5vZGVDb3ZlciA9ICQoZ2hvc3ROb2RlKS5jaGlsZHJlbigpLmdldCgwKTtcbiAgICAgIH1cbiAgICAgIHZhciB0cmFuc1ZhbHVlcyA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykuc3BsaXQoJywnKTtcbiAgICAgIHZhciBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/IHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcbiAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkpO1xuICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLDUgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5Jyw1ICogc2NhbGUpO1xuICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAxMjAgKiBzY2FsZSk7XG4gICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J5JywgNCAqIHNjYWxlKTtcbiAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XG4gICAgICB2YXIgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICB2YXIgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XG4gICAgICAgIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgeU9mZnNldCA9ICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICB9XG4gICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgICAgdmFyIGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZSwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGZpbHRlckFsbG93ZWREcm9wTm9kZXM6IGZ1bmN0aW9uICgkZHJhZ2dlZCkge1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgJGRyYWdab25lID0gJGRyYWdnZWQuY2xvc2VzdCgnLm5vZGVzJykuc2libGluZ3MoKS5lcSgwKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgdmFyICRkcmFnSGllciA9ICRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgnLm5vZGUnKTtcbiAgICAgIHRoaXMuJGNoYXJ0LmRhdGEoJ2RyYWdnZWQnLCAkZHJhZ2dlZClcbiAgICAgICAgLmZpbmQoJy5ub2RlJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG5vZGUpIHtcbiAgICAgICAgICBpZiAoJGRyYWdIaWVyLmluZGV4KG5vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSgkZHJhZ2dlZCwgJGRyYWdab25lLCAkKG5vZGUpKSkge1xuICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgZHJhZ3N0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAvLyBpZiB1c2VycyBlbmFibGUgem9vbSBvciBkaXJlY3Rpb24gb3B0aW9uc1xuICAgICAgaWYgKHRoaXMuJGNoYXJ0LmNzcygndHJhbnNmb3JtJykgIT09ICdub25lJykge1xuICAgICAgICB0aGlzLmNyZWF0ZUdob3N0Tm9kZShldmVudCk7XG4gICAgICB9XG4gICAgICB0aGlzLmZpbHRlckFsbG93ZWREcm9wTm9kZXMoJChldmVudC50YXJnZXQpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZHJhZ292ZXJIYW5kbGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoISQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpLmlzKCcuYWxsb3dlZERyb3AnKSkge1xuICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBkcmFnZW5kSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB0aGlzLiRjaGFydC5maW5kKCcuYWxsb3dlZERyb3AnKS5yZW1vdmVDbGFzcygnYWxsb3dlZERyb3AnKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZHJvcEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyICRkcm9wWm9uZSA9ICQoZXZlbnQuZGVsZWdhdGVUYXJnZXQpO1xuICAgICAgdmFyICRkcmFnZ2VkID0gdGhpcy4kY2hhcnQuZGF0YSgnZHJhZ2dlZCcpO1xuICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuY2hpbGRyZW4oKTtcbiAgICAgIHZhciBkcm9wRXZlbnQgPSAkLkV2ZW50KCdub2RlZHJvcC5vcmdjaGFydCcpO1xuICAgICAgdGhpcy4kY2hhcnQudHJpZ2dlcihkcm9wRXZlbnQsIHsgJ2RyYWdnZWROb2RlJzogJGRyYWdnZWQsICdkcmFnWm9uZSc6ICRkcmFnWm9uZS5jaGlsZHJlbigpLCAnZHJvcFpvbmUnOiAkZHJvcFpvbmUgfSk7XG4gICAgICBpZiAoZHJvcEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGZpcnN0bHksIGRlYWwgd2l0aCB0aGUgaGllcmFyY2h5IG9mIGRyb3Agem9uZVxuICAgICAgaWYgKCEkZHJvcFpvbmUuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmxlbmd0aCkgeyAvLyBpZiB0aGUgZHJvcCB6b25lIGlzIGEgbGVhZiBub2RlXG4gICAgICAgICRkcm9wWm9uZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgIC5wYXJlbnQoKS5hdHRyKCdjb2xzcGFuJywgMilcbiAgICAgICAgICAucGFyZW50KCkuYWZ0ZXIoJzx0ciBjbGFzcz1cImxpbmVzXCI+PHRkIGNvbHNwYW49XCIyXCI+PGRpdiBjbGFzcz1cImRvd25MaW5lXCI+PC9kaXY+PC90ZD48L3RyPidcbiAgICAgICAgICArICc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPjwvdHI+J1xuICAgICAgICAgICsgJzx0ciBjbGFzcz1cIm5vZGVzXCI+PC90cj4nKVxuICAgICAgICAgIC5zaWJsaW5ncygnOmxhc3QnKS5hcHBlbmQoJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCkuZW5kKCkuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZHJvcENvbHNwYW4gPSBwYXJzZUludCgkZHJvcFpvbmUucGFyZW50KCkuYXR0cignY29sc3BhbicpKSArIDI7XG4gICAgICAgIHZhciBob3Jpem9udGFsRWRnZXMgPSAnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT48aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+JztcbiAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykubmV4dCgpLmFkZEJhY2soKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XG4gICAgICAgIGlmICghJGRyYWdnZWQuZmluZCgnLmhvcml6b250YWxFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJGRyYWdnZWQuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XG4gICAgICAgIH1cbiAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgxKS5jaGlsZHJlbignOmxhc3QnKS5iZWZvcmUoJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj48L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+PC90ZD4nKVxuICAgICAgICAgIC5lbmQoKS5uZXh0KCkuYXBwZW5kKCRkcmFnZ2VkLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkpO1xuICAgICAgICB2YXIgJGRyb3BTaWJzID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgIGlmICgkZHJvcFNpYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJGRyb3BTaWJzLmFwcGVuZChob3Jpem9udGFsRWRnZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBzZWNvbmRseSwgZGVhbCB3aXRoIHRoZSBoaWVyYXJjaHkgb2YgZHJhZ2dlZCBub2RlXG4gICAgICB2YXIgZHJhZ0NvbHNwYW4gPSBwYXJzZUludCgkZHJhZ1pvbmUuYXR0cignY29sc3BhbicpKTtcbiAgICAgIGlmIChkcmFnQ29sc3BhbiA+IDIpIHtcbiAgICAgICAgJGRyYWdab25lLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXG4gICAgICAgICAgLnBhcmVudCgpLm5leHQoKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXG4gICAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbigpLnNsaWNlKDEsIDMpLnJlbW92ZSgpO1xuICAgICAgICB2YXIgJGRyYWdTaWJzID0gJGRyYWdab25lLnBhcmVudCgpLnNpYmxpbmdzKCcubm9kZXMnKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgIGlmICgkZHJhZ1NpYnMubGVuZ3RoID09PTEpIHtcbiAgICAgICAgICAkZHJhZ1NpYnMuZmluZCgnLmhvcml6b250YWxFZGdlJykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRkcmFnWm9uZS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAuZmluZCgnLmJvdHRvbUVkZ2UnKS5yZW1vdmUoKVxuICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICB0b3VjaHN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwib3JnQ2hhcnQ6IHRvdWNoc3RhcnQgMTogdG91Y2hIYW5kbGVkPVwiICsgdGhpcy50b3VjaEhhbmRsZWQgKyBcIiwgdG91Y2hNb3ZlZD1cIiArIHRoaXMudG91Y2hNb3ZlZCArIFwiLCB0YXJnZXQ9XCIgKyBldmVudC50YXJnZXQuaW5uZXJUZXh0KTtcbiAgICAgICAgaWYgKHRoaXMudG91Y2hIYW5kbGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRvdWNoSGFuZGxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMudG91Y2hNb3ZlZCA9IGZhbHNlOyAgICAgLy8gdGhpcyBpcyBzbyB3ZSBjYW4gd29yayBvdXQgbGF0ZXIgaWYgdGhpcyB3YXMgYSAncHJlc3MnIG9yIGEgJ2RyYWcnIHRvdWNoXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSxcbiAgICAvL1xuICAgIHRvdWNobW92ZUhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCF0aGlzLnRvdWNoSGFuZGxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghdGhpcy50b3VjaE1vdmVkKSB7XG4gICAgICAgIHZhciBub2RlSXNTZWxlY3RlZCA9ICQodGhpcykuaGFzQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvcmdDaGFydDogdG91Y2htb3ZlIDE6IFwiICsgZXZlbnQudG91Y2hlcy5sZW5ndGggKyBcIiB0b3VjaGVzLCB3ZSBoYXZlIG5vdCBtb3ZlZCwgc28gc2ltdWxhdGUgYSBkcmFnIHN0YXJ0XCIsIGV2ZW50LnRvdWNoZXMpO1xuICAgICAgICAvLyBUT0RPOiB2aXN1YWxpc2UgdGhlIHN0YXJ0IG9mIHRoZSBkcmFnIChhcyB3b3VsZCBoYXBwZW4gb24gZGVza3RvcClcbiAgICAgICAgdGhpcy5zaW11bGF0ZU1vdXNlRXZlbnQoZXZlbnQsICdkcmFnc3RhcnQnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudG91Y2hNb3ZlZCA9IHRydWU7XG4gICAgICB2YXIgJHRvdWNoaW5nID0gJChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCwgZXZlbnQudG91Y2hlc1swXS5jbGllbnRZKSk7XG4gICAgICB2YXIgJHRvdWNoaW5nTm9kZSA9ICR0b3VjaGluZy5jbG9zZXN0KCdkaXYubm9kZScpO1xuIFxuICAgICAgaWYgKCR0b3VjaGluZ05vZGUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdG91Y2hpbmdOb2RlRWxlbWVudCA9ICR0b3VjaGluZ05vZGVbMF07XG4gICAgICAgIC8vIFRPRE86IHNpbXVsYXRlIHRoZSBkcmFnb3ZlciB2aXN1YWxpc2F0aW9uXG4gICAgICAgIGlmICgkdG91Y2hpbmdOb2RlLmlzKCcuYWxsb3dlZERyb3AnKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJvcmdDaGFydDogdG91Y2htb3ZlIDI6IHRoaXMgbm9kZSAoXCIgKyB0b3VjaGluZ05vZGVFbGVtZW50LmlkICsgXCIpIGlzIGFsbG93ZWQgdG8gYmUgYSBkcm9wIHRhcmdldFwiKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hUYXJnZXROb2RlID0gdG91Y2hpbmdOb2RlRWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3JnQ2hhcnQ6IHRvdWNobW92ZSAzOiB0aGlzIG5vZGUgKFwiICsgdG91Y2hpbmdOb2RlRWxlbWVudC5pZCArIFwiKSBpcyBOT1QgYWxsb3dlZCB0byBiZSBhIGRyb3AgdGFyZ2V0XCIpO1xuICAgICAgICAgICAgdGhpcy50b3VjaFRhcmdldE5vZGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm9yZ2NoYXJ0OiB0b3VjaG1vdmUgNDogbm90IHRvdWNoaW5nIGEgbm9kZVwiKTtcbiAgICAgICAgdGhpcy50b3VjaFRhcmdldE5vZGUgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICB0b3VjaGVuZEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgY29uc29sZS5sb2coXCJvcmdDaGFydDogdG91Y2hlbmQgMTogdG91Y2hIYW5kbGVkPVwiICsgdGhpcy50b3VjaEhhbmRsZWQgKyBcIiwgdG91Y2hNb3ZlZD1cIiArIHRoaXMudG91Y2hNb3ZlZCArIFwiLCBcIiArIGV2ZW50LnRhcmdldC5pbm5lclRleHQgKyBcIiBcIik7XG4gICAgICBpZiAoIXRoaXMudG91Y2hIYW5kbGVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJvcmdDaGFydDogdG91Y2hlbmQgMjogbm90IGhhbmRsZWQgYnkgdXMsIHNvIGFib3J0aW5nXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnRvdWNoTW92ZWQpIHtcbiAgICAgICAgICAvLyB3ZSd2ZSBoYWQgbW92ZW1lbnQsIHNvIHRoaXMgd2FzIGEgJ2RyYWcnIHRvdWNoXG4gICAgICAgICAgaWYgKHRoaXMudG91Y2hUYXJnZXROb2RlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib3JnQ2hhcnQ6IHRvdWNoZW5kIDM6IG1vdmVkIHRvIGEgbm9kZSwgc28gc2ltdWxhdGluZyBkcm9wXCIpO1xuICAgICAgICAgICAgICB2YXIgZmFrZUV2ZW50Rm9yRHJvcEhhbmRsZXIgPSB7IGRlbGVnYXRlVGFyZ2V0OiB0aGlzLnRvdWNoVGFyZ2V0Tm9kZSB9O1xuICAgICAgICAgICAgICB0aGlzLmRyb3BIYW5kbGVyKGZha2VFdmVudEZvckRyb3BIYW5kbGVyKTtcbiAgICAgICAgICAgICAgdGhpcy50b3VjaFRhcmdldE5vZGUgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm9yZ0NoYXJ0OiB0b3VjaGVuZCA0OiBzaW11bGF0aW5nIGRyYWdlbmRcIik7XG4gICAgICAgICAgdGhpcy5zaW11bGF0ZU1vdXNlRXZlbnQoZXZlbnQsICdkcmFnZW5kJyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgICAvLyB3ZSBkaWQgbm90IG1vdmUsIHNvIGFzc3VtZSB0aGlzIHdhcyBhICdwcmVzcycgdG91Y2hcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm9yZ0NoYXJ0OiB0b3VjaGVuZCA1OiBtb3ZlZCwgc28gc2ltdWxhdGluZyBjbGlja1wiKTtcbiAgICAgICAgICB0aGlzLnNpbXVsYXRlTW91c2VFdmVudChldmVudCwgJ2NsaWNrJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnRvdWNoSGFuZGxlZCA9IGZhbHNlO1xuICAgIH0sXG4gICAgLy8gc2ltdWxhdGUgYSBtb3VzZSBldmVudCAoc28gd2UgY2FuIGZha2UgdGhlbSBvbiBhIHRvdWNoIGRldmljZSlcbiAgICBzaW11bGF0ZU1vdXNlRXZlbnQ6IGZ1bmN0aW9uIChldmVudCwgc2ltdWxhdGVkVHlwZSkge1xuICAgICAgLy8gSWdub3JlIG11bHRpLXRvdWNoIGV2ZW50c1xuICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB0b3VjaCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICB2YXIgc2ltdWxhdGVkRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTtcbiAgICAgIHNpbXVsYXRlZEV2ZW50LmluaXRNb3VzZUV2ZW50KFxuICAgICAgICBzaW11bGF0ZWRUeXBlLCAgICAvLyB0eXBlXG4gICAgICAgIHRydWUsICAgICAgICAgICAgIC8vIGJ1YmJsZXMgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB0cnVlLCAgICAgICAgICAgICAvLyBjYW5jZWxhYmxlICAgICAgICAgICAgICAgICBcbiAgICAgICAgd2luZG93LCAgICAgICAgICAgLy8gdmlldyAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIDEsICAgICAgICAgICAgICAgIC8vIGRldGFpbCAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB0b3VjaC5zY3JlZW5YLCAgICAvLyBzY3JlZW5YICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgdG91Y2guc2NyZWVuWSwgICAgLy8gc2NyZWVuWSAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIHRvdWNoLmNsaWVudFgsICAgIC8vIGNsaWVudFggICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB0b3VjaC5jbGllbnRZLCAgICAvLyBjbGllbnRZICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgZmFsc2UsICAgICAgICAgICAgLy8gY3RybEtleSAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGZhbHNlLCAgICAgICAgICAgIC8vIGFsdEtleSAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBmYWxzZSwgICAgICAgICAgICAvLyBzaGlmdEtleSAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgZmFsc2UsICAgICAgICAgICAgLy8gbWV0YUtleSAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIDAsICAgICAgICAgICAgICAgIC8vIGJ1dHRvbiAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBudWxsICAgICAgICAgICAgICAvLyByZWxhdGVkVGFyZ2V0ICAgICAgICAgICAgICBcbiAgICAgICk7XG4gICAgICAvLyBEaXNwYXRjaCB0aGUgc2ltdWxhdGVkIGV2ZW50IHRvIHRoZSB0YXJnZXQgZWxlbWVudFxuICAgICAgZXZlbnQudGFyZ2V0LmRpc3BhdGNoRXZlbnQoc2ltdWxhdGVkRXZlbnQpO1xuICAgIH0sXG4gICAgLy8gY3JlYXRlIG5vZGVcbiAgICBjcmVhdGVOb2RlOiBmdW5jdGlvbiAobm9kZURhdGEsIGxldmVsLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBpZiAobm9kZURhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgJC5lYWNoKG5vZGVEYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoaW5kZXgsIGNoaWxkKSB7XG4gICAgICAgICAgY2hpbGQucGFyZW50SWQgPSBub2RlRGF0YS5pZDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB2YXIgZHRkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgLy8gY29uc3RydWN0IHRoZSBjb250ZW50IG9mIG5vZGVcbiAgICAgIHZhciAkbm9kZURpdiA9ICQoJzxkaXYnICsgKG9wdHMuZHJhZ2dhYmxlID8gJyBkcmFnZ2FibGU9XCJ0cnVlXCInIDogJycpICsgKG5vZGVEYXRhW29wdHMubm9kZUlkXSA/ICcgaWQ9XCInICsgbm9kZURhdGFbb3B0cy5ub2RlSWRdICsgJ1wiJyA6ICcnKSArIChub2RlRGF0YS5wYXJlbnRJZCA/ICcgZGF0YS1wYXJlbnQ9XCInICsgbm9kZURhdGEucGFyZW50SWQgKyAnXCInIDogJycpICsgJz4nKVxuICAgICAgICAuYWRkQ2xhc3MoJ25vZGUgJyArIChub2RlRGF0YS5jbGFzc05hbWUgfHwgJycpICsgIChsZXZlbCA+PSBvcHRzLmRlcHRoID8gJyBzbGlkZS11cCcgOiAnJykpO1xuICAgICAgaWYgKG9wdHMubm9kZVRlbXBsYXRlKSB7XG4gICAgICAgICRub2RlRGl2LmFwcGVuZChvcHRzLm5vZGVUZW1wbGF0ZShub2RlRGF0YSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidGl0bGVcIj4nICsgbm9kZURhdGFbb3B0cy5ub2RlVGl0bGVdICsgJzwvZGl2PicpXG4gICAgICAgICAgLmFwcGVuZCh0eXBlb2Ygb3B0cy5ub2RlQ29udGVudCAhPT0gJ3VuZGVmaW5lZCcgPyAnPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nICsgKG5vZGVEYXRhW29wdHMubm9kZUNvbnRlbnRdIHx8ICcnKSArICc8L2Rpdj4nIDogJycpO1xuICAgICAgfVxuICAgICAgLy8gYXBwZW5kIDQgZGlyZWN0aW9uIGFycm93cyBvciBleHBhbmQvY29sbGFwc2UgYnV0dG9uc1xuICAgICAgdmFyIGZsYWdzID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcnO1xuICAgICAgaWYgKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+IG9wdHMudmVydGljYWxEZXB0aCkge1xuICAgICAgICBpZiAoKGxldmVsICsgMSkgPj0gb3B0cy52ZXJ0aWNhbERlcHRoICYmIE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICB2YXIgaWNvbiA9IGxldmVsICsgMSAgPj0gb3B0cy5kZXB0aCA/ICdwbHVzJyA6ICdtaW51cyc7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cInRvZ2dsZUJ0biBmYSBmYS0nICsgaWNvbiArICctc3F1YXJlXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoTnVtYmVyKGZsYWdzLnN1YnN0cigwLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSB0b3BFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMSwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+JyArXG4gICAgICAgICAgICAnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIGlmKE51bWJlcihmbGFncy5zdWJzdHIoMiwxKSkpIHtcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCcudGl0bGUnKS5wcmVwZW5kKCc8aSBjbGFzcz1cImZhICcrIG9wdHMucGFyZW50Tm9kZVN5bWJvbCArICcgc3ltYm9sXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRub2RlRGl2Lm9uKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnLCB0aGlzLm5vZGVFbnRlckxlYXZlSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsIHRoaXMubm9kZUNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9wRWRnZScsIHsgJ25vZGVEYXRhJzogbm9kZURhdGEgfSwgdGhpcy50b3BFZGdlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5ib3R0b21FZGdlJywgeyAnbm9kZURhdGEnOiBub2RlRGF0YSB9LCB0aGlzLmJvdHRvbUVkZ2VDbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAkbm9kZURpdi5vbignY2xpY2snLCAnLmxlZnRFZGdlLCAucmlnaHRFZGdlJywgeyAnbm9kZURhdGEnOiBub2RlRGF0YSB9LCB0aGlzLmhFZGdlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b2dnbGVCdG4nLCB0aGlzLnRvZ2dsZVZOb2Rlcy5iaW5kKHRoaXMpKTtcblxuICAgICAgaWYgKG9wdHMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICRub2RlRGl2Lm9uKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdzdGFydEhhbmRsZXIuYmluZCh0aGlzKSlcbiAgICAgICAgLm9uKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ292ZXJIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgIC5vbignZHJhZ2VuZCcsIHRoaXMuZHJhZ2VuZEhhbmRsZXIuYmluZCh0aGlzKSlcbiAgICAgICAgLm9uKCdkcm9wJywgdGhpcy5kcm9wSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAub24oJ3RvdWNoc3RhcnQnLCB0aGlzLnRvdWNoc3RhcnRIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgIC5vbigndG91Y2htb3ZlJywgdGhpcy50b3VjaG1vdmVIYW5kbGVyLmJpbmQodGhpcykpXG4gICAgICAgIC5vbigndG91Y2hlbmQnLCB0aGlzLnRvdWNoZW5kSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy50b3VjaEhhbmRsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50b3VjaE1vdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudG91Y2hUYXJnZXROb2RlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8vIGFsbG93IHVzZXIgdG8gYXBwZW5kIGRvbSBtb2RpZmljYXRpb24gYWZ0ZXIgZmluaXNoaW5nIG5vZGUgY3JlYXRlIG9mIG9yZ2NoYXJ0XG4gICAgICBpZiAob3B0cy5jcmVhdGVOb2RlKSB7XG4gICAgICAgIG9wdHMuY3JlYXRlTm9kZSgkbm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuICAgICAgZHRkLnJlc29sdmUoJG5vZGVEaXYpO1xuICAgICAgcmV0dXJuIGR0ZC5wcm9taXNlKCk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZVxuICAgIGJ1aWxkSGllcmFyY2h5OiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVXcmFwcGVyO1xuICAgICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgICB2YXIgJGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbjtcbiAgICAgIHZhciBoYXNDaGlsZHJlbiA9ICRjaGlsZE5vZGVzID8gJGNoaWxkTm9kZXMubGVuZ3RoIDogZmFsc2U7XG4gICAgICB2YXIgaXNWZXJ0aWNhbE5vZGUgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA+IDEpIHsgLy8gaWYgbm9kZURhdGEgaGFzIG5lc3RlZCBzdHJ1Y3R1cmVcbiAgICAgICAgJG5vZGVXcmFwcGVyID0gaXNWZXJ0aWNhbE5vZGUgPyAkYXBwZW5kVG8gOiAkKCc8dGFibGU+Jyk7XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAkYXBwZW5kVG8uYXBwZW5kKCRub2RlV3JhcHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwsIG9wdHMpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdik7XG4gICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkKCc8dHIvPicpLmFwcGVuZCgkKCc8dGQnICsgKGhhc0NoaWxkcmVuID8gJyBjb2xzcGFuPVwiJyArICRjaGlsZE5vZGVzLmxlbmd0aCAqIDIgKyAnXCInIDogJycpICsgJz48L3RkPicpLmFwcGVuZCgkbm9kZURpdikpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdCBub2RlJylcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIGluZmVyaW9yIG5vZGVzIGFuZCBjb25uZWN0aW9uZyBsaW5lc1xuICAgICAgaWYgKGhhc0NoaWxkcmVuKSB7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhub2RlRGF0YSkubGVuZ3RoID09PSAxKSB7IC8vIGlmIG5vZGVEYXRhIGlzIGp1c3QgYW4gYXJyYXlcbiAgICAgICAgICAkbm9kZVdyYXBwZXIgPSAkYXBwZW5kVG87XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzSGlkZGVuID0gKGxldmVsICsgMSA+PSBvcHRzLmRlcHRoIHx8IG5vZGVEYXRhLmNvbGxhcHNlZCkgPyAnIGhpZGRlbicgOiAnJztcbiAgICAgICAgdmFyIGlzVmVydGljYWxMYXllciA9IChvcHRzLnZlcnRpY2FsRGVwdGggJiYgKGxldmVsICsgMikgPj0gb3B0cy52ZXJ0aWNhbERlcHRoKSA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lIGNsb3NlIHRvIHBhcmVudCBub2RlXG4gICAgICAgIGlmICghaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkIGNvbHNwYW49XCInICsgJGNoaWxkTm9kZXMubGVuZ3RoICogMiArICdcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZHJhdyB0aGUgbGluZXMgY2xvc2UgdG8gY2hpbGRyZW4gbm9kZXNcbiAgICAgICAgdmFyIGxpbmVMYXllciA9ICc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY2xhc3M9XCJyaWdodExpbmVcIj48L3RkPic7XG4gICAgICAgIGZvciAodmFyIGk9MTsgaTwkY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpbmVMYXllciArPSAnPHRkIGNsYXNzPVwibGVmdExpbmUgdG9wTGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwicmlnaHRMaW5lIHRvcExpbmVcIj48L3RkPic7XG4gICAgICAgIH1cbiAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZVwiPjwvdGQ+PC90cj4nO1xuICAgICAgICB2YXIgJG5vZGVMYXllcjtcbiAgICAgICAgaWYgKGlzVmVydGljYWxMYXllcikge1xuICAgICAgICAgICRub2RlTGF5ZXIgPSAkKCc8dWw+Jyk7XG4gICAgICAgICAgaWYgKGlzSGlkZGVuICYmIG9wdHMuZGVwdGggKyAxICE9PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICAgICRub2RlTGF5ZXIuYWRkQ2xhc3MoaXNIaWRkZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cInZlcnRpY2FsTm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgICAuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5jaGlsZHJlbigpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx0ciBjbGFzcz1cIm5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPicpO1xuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQobGluZUxheWVyKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVjdXJzZSB0aHJvdWdoIGNoaWxkcmVuIG5vZGVzXG4gICAgICAgICQuZWFjaCgkY2hpbGROb2RlcywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyICRub2RlQ2VsbCA9IGlzVmVydGljYWxMYXllciA/ICQoJzxsaT4nKSA6ICQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpO1xuICAgICAgICAgICRub2RlTGF5ZXIuYXBwZW5kKCRub2RlQ2VsbCk7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkbm9kZUNlbGwsIHRoaXMsIGxldmVsICsgMSwgb3B0cywgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBjaGlsZCBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRDaGlsZE5vZGU6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRhcHBlbmRUby5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgZGF0YSA9IG5vZGVEYXRhLmNoaWxkcmVuIHx8IG5vZGVEYXRhLnNpYmxpbmdzO1xuICAgICAgJGFwcGVuZFRvLmZpbmQoJ3RkOmZpcnN0JykuYXR0cignY29sc3BhbicsIGRhdGEubGVuZ3RoICogMik7XG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoKytjb3VudCA9PT0gZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghJG5vZGUuZmluZCgnLnN5bWJvbCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoYXQuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgcGFyZW50IG5vZGUgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkUGFyZW50Tm9kZTogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRhYmxlID0gJCgnPHRhYmxlPicpO1xuICAgICAgbm9kZURhdGEucmVsYXRpb25zaGlwID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcwMDEnO1xuICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgMCwgb3B0cyB8fCAkY3VycmVudFJvb3QuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCQoJzx0ciBjbGFzcz1cImhpZGRlblwiPicpLmFwcGVuZCgkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKS5hcHBlbmQoJG5vZGVEaXYucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuYWRkQ2xhc3MoJ3NsaWRlLWRvd24nKSkpKTtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+Jyk7XG4gICAgICAgICAgdmFyIGxpbmVzUm93ID0gJzx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPjwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj48L3RkPic7XG4gICAgICAgICAgJHRhYmxlLmFwcGVuZCgnPHRyIGNsYXNzPVwibGluZXMgaGlkZGVuXCI+JyArIGxpbmVzUm93ICsgJzwvdHI+Jyk7XG4gICAgICAgICAgdmFyICRjaGFydCA9IHRoYXQuJGNoYXJ0O1xuICAgICAgICAgICRjaGFydC5wcmVwZW5kKCR0YWJsZSlcbiAgICAgICAgICAgIC5jaGlsZHJlbigndGFibGU6Zmlyc3QnKS5hcHBlbmQoJzx0ciBjbGFzcz1cIm5vZGVzXCI+PHRkIGNvbHNwYW49XCIyXCI+PC90ZD48L3RyPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigpLmFwcGVuZCgkY2hhcnQuY2hpbGRyZW4oJ3RhYmxlJykubGFzdCgpKTtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBwYXJlbnQgbm9kZScpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkUGFyZW50OiBmdW5jdGlvbiAoJGN1cnJlbnRSb290LCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkUGFyZW50Tm9kZSgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRvcEVkZ2UnKS5sZW5ndGgpIHtcbiAgICAgICAgICAkY3VycmVudFJvb3QuY2hpbGRyZW4oJy50aXRsZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhhdC5zaG93UGFyZW50KCRjdXJyZW50Um9vdCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHN1YnNlcXVlbnQgcHJvY2Vzc2luZyBvZiBidWlsZCBzaWJsaW5nIG5vZGVzXG4gICAgY29tcGxlbWVudExpbmU6IGZ1bmN0aW9uICgkb25lU2libGluZywgc2libGluZ0NvdW50LCBleGlzdGluZ1NpYmxpZ0NvdW50KSB7XG4gICAgICB2YXIgbGluZXMgPSAnJztcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhpc3RpbmdTaWJsaWdDb3VudDsgaSsrKSB7XG4gICAgICAgIGxpbmVzICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPjwvdGQ+JztcbiAgICAgIH1cbiAgICAgICRvbmVTaWJsaW5nLnBhcmVudCgpLnByZXZBbGwoJ3RyOmd0KDApJykuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgc2libGluZ0NvdW50ICogMilcbiAgICAgICAgLmVuZCgpLm5leHQoKS5jaGlsZHJlbignOmZpcnN0JykuYWZ0ZXIobGluZXMpO1xuICAgIH0sXG4gICAgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkU2libGluZ05vZGU6IGZ1bmN0aW9uICgkbm9kZUNoYXJ0LCBub2RlRGF0YSwgb3B0cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBvcHRzID0gb3B0cyB8fCAkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBuZXdTaWJsaW5nQ291bnQgPSBub2RlRGF0YS5zaWJsaW5ncyA/IG5vZGVEYXRhLnNpYmxpbmdzLmxlbmd0aCA6IG5vZGVEYXRhLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBleGlzdGluZ1NpYmxpZ0NvdW50ID0gJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSA/ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5jaGlsZHJlbigpLmxlbmd0aCA6IDE7XG4gICAgICB2YXIgc2libGluZ0NvdW50ID0gZXhpc3RpbmdTaWJsaWdDb3VudCArIG5ld1NpYmxpbmdDb3VudDtcbiAgICAgIHZhciBpbnNlcnRQb3N0aW9uID0gKHNpYmxpbmdDb3VudCA+IDEpID8gTWF0aC5mbG9vcihzaWJsaW5nQ291bnQvMiAtIDEpIDogMDtcbiAgICAgIC8vIGp1c3QgYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgZm9yIHRoZSBzcGVjaWZpYyBub2RlXG4gICAgICBpZiAoJG5vZGVDaGFydC5wYXJlbnQoKS5pcygndGQnKSkge1xuICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsYXN0Jyk7XG4gICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5wcmV2QWxsKCd0cjpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICB2YXIgY2hpbGRDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRDaGlsZE5vZGUoJG5vZGVDaGFydC5wYXJlbnQoKS5jbG9zZXN0KCd0YWJsZScpLCBub2RlRGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrY2hpbGRDb3VudCA9PT0gbmV3U2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB2YXIgJHNpYmxpbmdUZHMgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJykuY2hpbGRyZW4oJ3RyOmxhc3QnKS5jaGlsZHJlbigndGQnKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1NpYmxpZ0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKDApLmJlZm9yZSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykuc2libGluZ3MoKS5hZGRCYWNrKCkudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhhdC5jb21wbGVtZW50TGluZSgkc2libGluZ1Rkcy5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RkJykudW53cmFwKCkpLCBzaWJsaW5nQ291bnQsIDEpO1xuICAgICAgICAgICAgICAkc2libGluZ1Rkcy5ub3QoJzplcSgnICsgaW5zZXJ0UG9zdGlvbiArIDEgKyAnKScpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNsaWNlKGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLWxlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7IC8vIGJ1aWxkIHRoZSBzaWJsaW5nIG5vZGVzIGFuZCBwYXJlbnQgbm9kZSBmb3IgdGhlIHNwZWNpZmljIG5kb2VcbiAgICAgICAgdmFyIG5vZGVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJG5vZGVDaGFydC5jbG9zZXN0KCcub3JnY2hhcnQnKSwgbm9kZURhdGEsIDAsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgrK25vZGVDb3VudCA9PT0gc2libGluZ0NvdW50KSB7XG4gICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRub2RlQ2hhcnQubmV4dCgpLmNoaWxkcmVuKCd0cjpsYXN0JylcbiAgICAgICAgICAgICAgLmNoaWxkcmVuKCkuZXEoaW5zZXJ0UG9zdGlvbikuYWZ0ZXIoJCgnPHRkIGNvbHNwYW49XCIyXCI+JylcbiAgICAgICAgICAgICAgLmFwcGVuZCgkbm9kZUNoYXJ0KSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5lcSgwKS5hZGRDbGFzcygnaGlkZGVuJykuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtZG93bicpO1xuICAgICAgICAgICAgJG5vZGVDaGFydC5wYXJlbnQoKS5zaWJsaW5ncygpLmFkZENsYXNzKCdoaWRkZW4nKVxuICAgICAgICAgICAgICAuc2xpY2UoMCwgaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtcmlnaHQnKVxuICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBhZGRTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkYXRhLCBvcHRzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB0aGlzLmJ1aWxkU2libGluZ05vZGUoJG5vZGUuY2xvc2VzdCgndGFibGUnKSwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLmRhdGEoJ3NpYmxpbmdzTG9hZGVkJywgdHJ1ZSk7XG4gICAgICAgIGlmICghJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpLmFmdGVyKCc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vXG4gICAgcmVtb3ZlTm9kZXM6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICRwYXJlbnQgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpO1xuICAgICAgdmFyICRzaWJzID0gJHBhcmVudC5wYXJlbnQoKS5zaWJsaW5ncygpO1xuICAgICAgaWYgKCRwYXJlbnQuaXMoJ3RkJykpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS5leGlzdCkge1xuICAgICAgICAgICRzaWJzLmVxKDIpLmNoaWxkcmVuKCcudG9wTGluZTpsdCgyKScpLnJlbW92ZSgpO1xuICAgICAgICAgICRzaWJzLnNsaWNlKDAsIDIpLmNoaWxkcmVuKCkuYXR0cignY29sc3BhbicsICRzaWJzLmVxKDIpLmNoaWxkcmVuKCkubGVuZ3RoKTtcbiAgICAgICAgICAkcGFyZW50LnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJzLmVxKDApLmNoaWxkcmVuKCkucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgICAuZmluZCgnLmJvdHRvbUVkZ2UnKS5yZW1vdmUoKVxuICAgICAgICAgICAgLmVuZCgpLmVuZCgpLnNpYmxpbmdzKCkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRwYXJlbnQuYWRkKCRwYXJlbnQuc2libGluZ3MoKSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGV4cG9ydDogZnVuY3Rpb24gKGV4cG9ydEZpbGVuYW1lLCBleHBvcnRGaWxlZXh0ZW5zaW9uKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBleHBvcnRGaWxlbmFtZSA9ICh0eXBlb2YgZXhwb3J0RmlsZW5hbWUgIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlbmFtZSA6IHRoaXMub3B0aW9ucy5leHBvcnRGaWxlbmFtZTtcbiAgICAgIGV4cG9ydEZpbGVleHRlbnNpb24gPSAodHlwZW9mIGV4cG9ydEZpbGVleHRlbnNpb24gIT09ICd1bmRlZmluZWQnKSA/ICBleHBvcnRGaWxlZXh0ZW5zaW9uIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVleHRlbnNpb247XG4gICAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyICRjaGFydENvbnRhaW5lciA9IHRoaXMuJGNoYXJ0Q29udGFpbmVyO1xuICAgICAgdmFyICRtYXNrID0gJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJyk7XG4gICAgICBpZiAoISRtYXNrLmxlbmd0aCkge1xuICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibWFza1wiPjxpIGNsYXNzPVwiZmEgZmEtY2lyY2xlLW8tbm90Y2ggZmEtc3BpbiBzcGlubmVyXCI+PC9pPjwvZGl2PicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJG1hc2sucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgdmFyIHNvdXJjZUNoYXJ0ID0gJGNoYXJ0Q29udGFpbmVyLmFkZENsYXNzKCdjYW52YXNDb250YWluZXInKS5maW5kKCcub3JnY2hhcnQ6bm90KFwiLmhpZGRlblwiKScpLmdldCgwKTtcbiAgICAgIHZhciBmbGFnID0gdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2wycicgfHwgdGhhdC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3IybCc7XG4gICAgICBodG1sMmNhbnZhcyhzb3VyY2VDaGFydCwge1xuICAgICAgICAnd2lkdGgnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50SGVpZ2h0IDogc291cmNlQ2hhcnQuY2xpZW50V2lkdGgsXG4gICAgICAgICdoZWlnaHQnOiBmbGFnID8gc291cmNlQ2hhcnQuY2xpZW50V2lkdGggOiBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQsXG4gICAgICAgICdvbmNsb25lJzogZnVuY3Rpb24gKGNsb25lRG9jKSB7XG4gICAgICAgICAgJChjbG9uZURvYykuZmluZCgnLmNhbnZhc0NvbnRhaW5lcicpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpXG4gICAgICAgICAgICAuZmluZCgnLm9yZ2NoYXJ0Om5vdChcIi5oaWRkZW5cIik6Zmlyc3QnKS5jc3MoJ3RyYW5zZm9ybScsICcnKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ29ucmVuZGVyZWQnOiBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5tYXNrJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgIGlmIChleHBvcnRGaWxlZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdwZGYnKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0ge307XG4gICAgICAgICAgICB2YXIgZG9jV2lkdGggPSBNYXRoLmZsb29yKGNhbnZhcy53aWR0aCAqIDAuMjY0Nik7XG4gICAgICAgICAgICB2YXIgZG9jSGVpZ2h0ID0gTWF0aC5mbG9vcihjYW52YXMuaGVpZ2h0ICogMC4yNjQ2KTtcbiAgICAgICAgICAgIGlmIChkb2NXaWR0aCA+IGRvY0hlaWdodCkge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ2wnLCAnbW0nLCBbZG9jV2lkdGgsIGRvY0hlaWdodF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZG9jID0gbmV3IGpzUERGKCdwJywgJ21tJywgW2RvY0hlaWdodCwgZG9jV2lkdGhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvYy5hZGRJbWFnZShjYW52YXMudG9EYXRhVVJMKCksICdwbmcnLCAwLCAwKTtcbiAgICAgICAgICAgIGRvYy5zYXZlKGV4cG9ydEZpbGVuYW1lICsgJy5wZGYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGlzV2Via2l0ID0gJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcbiAgICAgICAgICAgIHZhciBpc0ZmID0gISF3aW5kb3cuc2lkZWJhcjtcbiAgICAgICAgICAgIHZhciBpc0VkZ2UgPSBuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgfHwgKG5hdmlnYXRvci5hcHBOYW1lID09PSBcIk5ldHNjYXBlXCIgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignRWRnZScpID4gLTEpO1xuXG4gICAgICAgICAgICBpZiAoKCFpc1dlYmtpdCAmJiAhaXNGZikgfHwgaXNFZGdlKSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlQmxvYihjYW52YXMubXNUb0Jsb2IoKSwgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5vYy1kb3dubG9hZC1idG4nICsgKHRoYXQub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcuJyArIHRoYXQub3B0aW9ucy5jaGFydENsYXNzIDogJycpO1xuICAgICAgICAgICAgICBpZiAoISRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCc8YSBjbGFzcz1cIm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJyAnICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykgKyAnXCInXG4gICAgICAgICAgICAgICAgICArICcgZG93bmxvYWQ9XCInICsgZXhwb3J0RmlsZW5hbWUgKyAnLnBuZ1wiPjwvYT4nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZChzZWxlY3RvcikuYXR0cignaHJlZicsIGNhbnZhcy50b0RhdGFVUkwoKSlbMF0uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5yZW1vdmVDbGFzcygnY2FudmFzQ29udGFpbmVyJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJC5mbi5vcmdjaGFydCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBPcmdDaGFydCh0aGlzLCBvcHRzKS5pbml0KCk7XG4gIH07XG5cbn0pKTtcbiJdfQ==
